ä¸Šä¸€è¯¾æ—¶æˆ‘è¯¦ç»†ä»‹ç»äº†æœ‰/æ— çŠ¶æ€ç»„ä»¶çš„åº”ç”¨è®¾è®¡ï¼Œä½†æ˜¯åœ¨è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œè¿˜ç¼ºä¹ä¸€ä¸ªå¯¹çŠ¶æ€ç®¡ç†çš„è€ƒè™‘ã€‚æœ¬è¯¾æ—¶ä»‹ç»çŠ¶æ€ç®¡ç†è®¾è®¡çš„å¿…è¦æ€§ï¼Œä»¥åŠä¸€äº›å¸¸è§çš„çŠ¶æ€ç®¡ç†æŠ€æœ¯å¯¹æ¯”ï¼Œæœ€åå†ç€é‡é€šè¿‡ Provider æ¥ä¼˜åŒ–å‰ä¸€è¯¾æ—¶ä¸­çš„ä¾‹å­ã€‚

### çŠ¶æ€ç®¡ç†åœºæ™¯

ä¸Šä¸€è¯¾æ—¶çš„ä¾‹å­ä¸­ï¼Œåªæ¶‰åŠä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶ article_like_bar ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®ç°å¦å¤–ä¸€ä¸ªè¯¦æƒ…é¡µé¢ï¼Œå¹¶ä¸”åœ¨è¯¦æƒ…é¡µé¢ä¸­ä¹Ÿéœ€è¦ä¸€ä¸ªç‚¹èµåŠŸèƒ½ï¼Œå…·ä½“çš„ç•Œé¢æ•ˆæœå¯ä»¥å‚è€ƒåŠ¨å›¾ 1 ï¼ˆä¸ºäº†ç•Œé¢æ›´å¥½ï¼Œæˆ‘åœ¨ä¸Šä¸€è¯¾æ—¶çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›æ ·å¼ï¼‰ã€‚

![20200620_110314.gif](https://s0.lgstatic.com/i/image/M00/2A/89/CgqCHl78dduAVpypABtxqF5qwAA906.gif)
å›¾ 1 å¢åŠ äºŒçº§ç‚¹èµè¯¦æƒ…é¡µé¢æ•ˆæœ

åœ¨ä¸Šé¢çš„åŠ¨å›¾ä¾‹å­ä¸­ï¼Œä½ æ˜¯å¦å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Ÿç¬¬ä¸€ä¸ªé¡µé¢çš„ç‚¹èµæ•°ä¸ç¬¬äºŒä¸ªé¡µé¢çš„ç‚¹èµæ•°å¹¶ä¸åŒæ­¥ã€‚åœ¨å®é™…é¡¹ç›®å¼€å‘è¿‡ä¸­ï¼Œéœ€æ±‚æ–¹å¸Œæœ›äºŒçº§è¯¦æƒ…é¡µé¢çš„ç‚¹èµæ•°èƒ½ä¸ç¬¬ä¸€ä¸ªé¡µé¢çš„ç‚¹èµæ•°åŒæ­¥ã€‚

å¦‚æœä¸å¼•å…¥æ–°çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œèƒ½æƒ³åˆ°çš„åŠæ³•å°±æ˜¯å°†è¯¥çŠ¶æ€è¿›è¡Œæå‡ï¼Œæ”¾åˆ°å…¶å…±åŒçš„çˆ¶èŠ‚ç‚¹ä¸Šï¼Œç„¶åå°†çˆ¶èŠ‚ç‚¹è®¾è®¡ä¸ºæœ‰çŠ¶æ€ç»„ä»¶ï¼Œå¹¶æä¾›ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•ç»™åˆ°å­ç»„ä»¶ã€‚å¯ä»¥ç”¨å›¾ 2 æ¥è¡¨ç¤ºã€‚

![Drawing 1.png](https://s0.lgstatic.com/i/image/M00/2A/7D/Ciqc1F78dfGARKuUAACYOe66MlY026.png)

å›¾ 2 çŠ¶æ€æå‡å…±äº«æ–¹å¼

ä¸Šé¢çš„æ–¹å¼æ˜¯å¯ä»¥åšåˆ°è¿™ç‚¹ï¼Œä½†æ˜¯ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œåªå› ä¸ºä¸€ä¸ªç‚¹èµè¡Œä¸ºï¼Œå°±éœ€è¦å°†ä¸¤ä¸ªé¡µé¢çš„æ‰€æœ‰ç»„ä»¶ï¼ˆé™æ€ç»„ä»¶å’ŒåŠ¨å›¾ç»„ä»¶ï¼‰è¿›è¡Œé‡æ–° build ï¼Œæˆæœ¬å®åœ¨å¤ªé«˜ï¼Œè¿™ä¹Ÿè¿èƒŒäº†æˆ‘ä»¬ä¸Šä¸€è¯¾æ—¶çš„ç»„ä»¶è®¾è®¡åŸåˆ™ï¼ˆå°½å¯èƒ½å‡å°‘åŠ¨æ€ç»„ä»¶ä¸‹çš„é™æ€ç»„ä»¶ï¼‰ã€‚ä¸ºäº†æ›´å¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦å¼•å…¥ä¸€äº›çŠ¶æ€ç®¡ç†çš„æ–¹æ³•ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€äº›å¸¸è§çš„æŠ€æœ¯æ–¹æ¡ˆï¼ŒåŒæ—¶åšä¸€ä¸ªå¯¹æ¯”ã€‚

### çŠ¶æ€é€‰å‹å¯¹æ¯”

çŠ¶æ€ç®¡ç†æŠ€æœ¯ä¸å°‘äº 10 ç§ï¼Œä½†æ˜¯ä¸ºäº†é«˜æ•ˆï¼Œæˆ‘åªä»‹ç»å…¶ä¸­æ¯”è¾ƒæ ¸å¿ƒçš„ä¸‰ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯åŸç”Ÿæ‰€ä½¿ç”¨çš„ InheritedWidget ï¼›ç¬¬äºŒä¸ªæ˜¯ç›¸å¯¹å‰ç«¯åŒå­¦æ¯”è¾ƒç†Ÿæ‚‰çš„ Redux æŠ€æœ¯ï¼›æœ€åä¸€ä¸ªåˆ™æ˜¯æˆ‘ä»¬æ¨èä½¿ç”¨çš„æŠ€æœ¯ Provider ã€‚

#### InheritedWidget

InheritedWidget æ ¸å¿ƒåŸç†å’ŒçŠ¶æ€æå‡åŸç†ä¸€è‡´ï¼Œå°† likeNum æå‡åˆ°æ ¹èŠ‚ç‚¹ï¼Œä½†ä¸éœ€è¦ä¸€å±‚å±‚åœ°å°†å˜é‡ä¼ é€’ä¸‹å»ï¼Œåªéœ€è¦åœ¨æ ¹èŠ‚ç‚¹å£°æ˜å³å¯ã€‚

ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªé¡µé¢ï¼Œé¡µé¢ä¸‹æœ‰ä¸¤ä¸ªç»„ä»¶ï¼Œä¸¤ä¸ªç»„ä»¶éƒ½éœ€è¦ç”¨åŒä¸€ä¸ªåå­—ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªç»„ä»¶çš„åå­—å¯ä»¥ç‚¹å‡»åˆ‡æ¢éšæœºåå­—ï¼Œè€Œåˆ‡æ¢ä»¥åéœ€è¦åŠæ—¶æ›´æ–°ç¬¬ä¸€ä¸ªç»„ä»¶ä¸­çš„åå­—ã€‚é¡µé¢æ•ˆæœå¦‚å›¾ 3 æ‰€ç¤ºã€‚

![Drawing 3.png](https://s0.lgstatic.com/i/image/M00/2A/89/CgqCHl78diqALC0dAACKe0B0HjU731.png)
å›¾ 3 å¤šç»„ä»¶çŠ¶æ€å…±äº«æ•ˆæœ

æŒ‰ç…§ä¸Šé¢ä»‹ç»çš„ä¾‹å­ä»¥åŠä¸Šä¸€è¯¾æ—¶çš„çŸ¥è¯†ç‚¹ï¼Œç”»ä¸€ä¸ªç®€å•çš„ç»„ä»¶æ ‘ï¼Œå¹¶ä¸”é™„å¸¦ä¸Šéœ€è¦çš„çŠ¶æ€å±æ€§ï¼Œå¦‚å›¾ 4 æ‰€ç¤ºã€‚

![Drawing 4.png](https://s0.lgstatic.com/i/image/M00/2A/7D/Ciqc1F78djSAUVqwAACHGNkmeCM922.png)
å›¾ 4 InheritedWidget ç»„ä»¶è®¾è®¡

- é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ ¹ç»“ç‚¹ä¸ºä¸€ä¸ªæœ‰çŠ¶æ€ç»„ä»¶ name_gameï¼›
- name_game ä¸ºä¸€ä¸ªæœ‰çŠ¶æ€ç±»ï¼ŒçŠ¶æ€å±æ€§ä¸º nameï¼Œå¹¶å¸¦æœ‰ changName çš„çŠ¶æ€ä¿®æ”¹æ–¹æ³•ï¼›
- åˆ›å»ºä¸€ä¸ªçŠ¶æ€ç®¡ç†ç±»ç»„ä»¶ NameInheritedWidget ï¼›
- åˆ›å»º NameInheritedWidget çš„ä¸‰ä¸ªå­ç»„ä»¶ï¼Œåˆ†åˆ«ä¸º welcomeï¼ˆæ˜¾ç¤ºæ¬¢è¿ name ï¼‰ã€random_nameï¼ˆæ˜¾ç¤º name ï¼Œå¹¶ä¸”æœ‰ç‚¹å‡»åˆ‡æ¢éšæœº name æ“ä½œï¼‰å’Œ other_widgets ã€‚

**å¯¹äºä¸Šé¢çš„ç»“æ„ï¼Œè‚¯å®šæœ‰å¾ˆå¤šåŒå­¦æ¯”è¾ƒç–‘æƒ‘ï¼Œother_widgets å¹¶æ²¡æœ‰ä½¿ç”¨è¿™ä¸ª name çŠ¶æ€ï¼Œä¸ºä»€ä¹ˆè¦åœ¨ NameInheritedWidget ä¸‹å‘¢**ï¼Ÿ

å¸¦ç€è¿™æ ·çš„ç–‘æƒ‘ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ name_game æ ¸å¿ƒä»£ç ï¼ˆä¸ºäº†åœ¨ä¸“æ ä¸­æ›´ç®€æ´ï¼Œæˆ‘çœå»äº†éƒ¨åˆ†ä»£ç ï¼Œå®Œæ•´ä»£ç å¤§å®¶å¯ä»¥å‚è€ƒæ–‡ç« ä¸‹çš„ github ä»£ç åœ°å€ï¼‰ã€‚

å¤åˆ¶ä»£ç 

```
/// éšæœºåå­—æ¸¸æˆç»„ä»¶çŠ¶æ€ç®¡ç†ç±»

class NameGameState extends State<NameGame> {

  /// name çŠ¶æ€

  String name;

  /// æ„é€ å‡½æ•°å‚æ•°ï¼Œé¿å…çˆ¶ç»„ä»¶çŠ¶æ€å˜åŒ–ï¼Œè€Œå¼•èµ·çš„å­ç»„ä»¶çš„é‡ build æ“ä½œ

  Widget child;

  /// ä¿®æ”¹å½“å‰åå­—

  void changeName() {

    List<String> nameList = ['flutter one', 'flutter two', 'flutter three'];

    int pos = Random().nextInt(3);

    setState(() {

      name = nameList[pos];

    });

  }

  @override

  void initState() {

    setState(() {

      name = 'test flutter';

    });

    super.initState();

  }

  /// æ„é€ å‡½æ•°

  NameGameState()

  {

    child = Column (

        children: <Widget>[

          Welcome(),

          RandomName(),

          TestOther(),

        ]

    );

  }

  @override

  Widget build(BuildContext context) {

    return Column(

      children: <Widget>[

        NameInheritedWidget(

            child: child,

            onNameChange: changeName,

            name: name

        ),

      ],

    );

  }

}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå®šä¹‰çŠ¶æ€å±æ€§ name ï¼Œå¹¶åˆ›å»ºäº†å¯ä»¥ä¿®æ”¹ state çš„ changeName æ–¹æ³•ã€‚æ¥ä¸‹æ¥åœ¨ build ä¸­ä½¿ç”¨ NameInheritedWidget è¿™ä¸ªç»„ä»¶ï¼ˆè¯¥ç»„ä»¶å¯ä»¥ç†è§£ä¸ºå‰ç«¯æ‰€è¯´çš„é«˜é˜¶ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å°†ç»„ä»¶ä½œä¸ºå‚æ•°ä¼ é€’è¿›è¯¥ç»„ä»¶ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶çš„åŠŸèƒ½ç»„ä»¶ï¼‰ï¼Œè¿™ä¸ªç»„ä»¶åŒ…è£¹äº†ä¸¤ä¸ªéœ€è¦çŠ¶æ€ name çš„ç»„ä»¶ï¼ˆ Welcome å’Œ RandomName ï¼‰ä»¥åŠä¸€ä¸ªä¸éœ€è¦çŠ¶æ€çš„ TestOtherã€‚

ä¸Šé¢ä»£ç ä¸­è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„åœ°æ–¹ï¼Œå°±æ˜¯å°† child ä½œä¸ºäº† state ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œäº†å®šä¹‰ï¼Œå¹¶å°†è¯¥ç»„ä»¶çš„æ‰€æœ‰å­ç»„ä»¶éƒ½åŒ…å«åœ¨äº† child ä¸­ã€‚å…·ä½“ä»€ä¹ˆåŸå› ï¼Œå¤§å®¶å¯ä»¥ç»§ç»­å¾€ä¸‹å­¦ä¹ ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ NameInheritedWidget çš„å®ç°é€»è¾‘ï¼Œä»£ç å¦‚ä¸‹ï¼š

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

/// å®šä¹‰ä¸€ä¸ªnameå…±äº«çˆ¶ç»„ä»¶

class NameInheritedWidget extends InheritedWidget {

  /// å…±äº«çŠ¶æ€

  final String name;

  /// ä¿®æ”¹å…±äº«çŠ¶æ€æ–¹æ³•

  final Function onNameChange;

  /// æ„é€ å‡½æ•°

  NameInheritedWidget({

    Key key,

    @required Widget child,

    @required this.name,

    @required this.onNameChange,

  }) : super(key: key, child: child);

  @override

  bool updateShouldNotify(NameInheritedWidget old) =>

      name != old.name;

}
```

ä¸»è¦æ˜¯æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œ name å’Œ onNameChange æ–¹æ³•ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªåˆ¤æ–­å‡½æ•° updateShouldNotify ã€‚å‰é¢ä¸¤ä¸ªå‚æ•°ä¸ç”¨ä»‹ç»ï¼Œå…³é”®åœ¨äº updateShouldNotify ï¼Œè¿™ä¸ªåˆ¤æ–­å‡½æ•°çš„ä½œç”¨å°±æ˜¯ä¸Šé¢å¤§å®¶çš„ç–‘æƒ‘ç‚¹ã€‚
å¦‚æœå°† TestOther ä¸ä½œä¸ºè¯¥å­ç»„ä»¶ï¼Œé‚£ä¹ˆæ ¹æ®æˆ‘ä»¬ä¹‹å‰äº†è§£åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œç”±äº setState ä¼šè§¦å‘çˆ¶ç»„ä»¶ NameGame çš„æ›´æ–°ï¼Œè€Œå­ç»„ä»¶ä¼šå› ä¸ºçˆ¶ç»„ä»¶çš„æ›´æ–°ï¼Œåˆ™ä¼šå¼•å‘æ‰§è¡Œ build æ“ä½œã€‚

å¦‚æœ TestOther æ˜¯ NameInheritedWidget çš„å­ç»„ä»¶ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œ setState åï¼ŒNameInheritedWidget ä¼šåˆ¤æ–­çŠ¶æ€æ˜¯å¦æœ‰çŠ¶æ€å˜åŒ–ï¼Œè¿˜ä¼šåˆ¤æ–­å­ç»„ä»¶æ˜¯å¦æœ‰ä¾èµ–è¯¥ name çŠ¶æ€ï¼Œä»è€Œå°±ä¿è¯äº†ä¸¤ç‚¹ï¼š

1. çŠ¶æ€å˜åŒ–æ—¶ï¼Œå¦‚æœæœªä½¿ç”¨è¯¥çŠ¶æ€å­ç»„ä»¶ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿ buildï¼›
2. ä½¿ç”¨äº†è¯¥çŠ¶æ€ç»„ä»¶ï¼Œå¦‚æœç»„ä»¶çš„çŠ¶æ€æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¸ä¼šå‘ç”Ÿ buildã€‚

è¿™ä¸¤ç‚¹å°±éå¸¸å¥½åœ°ä¿æŠ¤äº†æˆ‘ä»¬åˆšå¼€å§‹æåˆ°çš„é—®é¢˜ï¼Œå› ä¸ºæœ‰çŠ¶æ€çˆ¶ç»„ä»¶çš„æ›´æ–°ï¼Œè€Œå¯¼è‡´å…¨éƒ¨å­èŠ‚ç‚¹çš„ build æ“ä½œã€‚**è¿™é‡Œè¦éå¸¸æ³¨æ„ï¼Œéœ€è¦ä½¿ç”¨ NameGameState æ–¹æ³•æ¥å°è£…ç»„ä»¶ï¼Œå¦‚æœè¯¥å­ç»„ä»¶ç›´æ¥å†™åœ¨ build ä¸­çš„ child æ–¹æ³•ä¸­ï¼Œå°±æ— æ³•åˆ©ç”¨ NameInheritedWidget ä¼˜ç‚¹ï¼Œè¿™ç‚¹å¤§å®¶è¦ç‰¹åˆ«æ³¨æ„**ã€‚

æœ€åæˆ‘ä»¬å†æ¥çœ‹ä¸‹å­ç»„ä»¶å¦‚ä½•åˆ©ç”¨ name å’Œ onNameChange è¿™ä¸¤ä¸ªå€¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ RandomName ç»„ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

import 'package:two_you/inherited_widget/name_inherited_widget.dart';



/// éšæœºå±•ç¤ºäººå

class RandomName extends StatelessWidget {

  /// æœ‰çŠ¶æ€ç±»è¿”å›ç»„ä»¶ä¿¡æ¯

  @override

  Widget build(BuildContext context) {

    final String name = (

        context.inheritFromWidgetOfExactType(NameInheritedWidget)

        as NameInheritedWidget).name;

    final Function changeName = (

        context.inheritFromWidgetOfExactType(NameInheritedWidget)

        as NameInheritedWidget).onNameChange;

    return FlatButton(

      child: Text(name),

      onPressed: () => changeName(),

    );

  }

}
```

ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥è·å¾— InheritedWidget å¯¹è±¡ä¸­çš„æ–¹æ³•å’Œå±æ€§ã€‚

å¤åˆ¶ä»£ç 

```
context.inheritFromWidgetOfExactType(NameInheritedWidget) as NameInheritedWidget)
```

æ€»ç»“ä¸‹ InheritedWidget å®ç°çŠ¶æ€ç®¡ç†çš„è¦ç‚¹ï¼š

1. çŠ¶æ€æå‡ï¼Œå°†éœ€è¦å…±äº«çš„çŠ¶æ€æå‡åˆ°å…±åŒä¸”æœ€è¿‘çš„ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œå¹¶ä½¿ç”¨ InheritedWidget æ¥ç®¡ç†ï¼›
2. è¯¥çˆ¶èŠ‚ç‚¹ä¸Šï¼Œå°†æ‰€æœ‰å­èŠ‚ç‚¹ä½œä¸ºè¯¥èŠ‚ç‚¹çŠ¶æ€ç®¡ç†ç±»çš„ä¸€ä¸ªæ„é€ å‡½æ•°å‚æ•°ï¼Œå¹¶ä¸”ä¼ é€’ç»™ InheritedWidgetï¼›
3. å­èŠ‚ç‚¹é€šè¿‡ inheritFromWidgetOfExactType çš„æ–¹æ³•æ¥è·å–çŠ¶æ€ç®¡ç†ç±» InheritedWidget ä¸­çš„å±æ€§ä»¥åŠæ–¹æ³•ã€‚

#### Redux

ç”±äº Redux åœ¨å‰ç«¯æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„çŠ¶æ€ç®¡ç†æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œä¸è¿‡åœ¨ Flutter ä¸­ ï¼ŒRedux å¹¶éç¬¬ä¸€é€‰æ‹©ã€‚Redux æ ¸å¿ƒæ€æƒ³æ˜¯å•å‘æ•°æ®æµæ¶æ„ï¼Œå°†æ‰€æœ‰çš„çŠ¶æ€å­˜å‚¨åœ¨ store ä¸­ï¼Œæ‰€æœ‰æ•°æ®æ”¹å˜éƒ½æ˜¯é€šè¿‡ Action ï¼Œç„¶å Action è§¦å‘ store å­˜å‚¨ï¼Œstore å˜åŒ–è§¦å‘æ‰€æœ‰åº”ç”¨è¯¥çŠ¶æ€çš„ç»„ä»¶çš„ build æ“ä½œã€‚ä¸ºäº†å®ç°æ•ˆæœï¼Œæˆ‘ä»¬ä¹ŸåŒæ ·ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š

1. å› ä¸ºæ˜¯ç¬¬ä¸‰æ–¹åº“ï¼Œå› æ­¤éœ€è¦åœ¨ pubspec.yaml å¢åŠ ä¾èµ–ï¼›
2. å®ç° state ç®¡ç†ä¸­å¿ƒï¼›
3. åˆ›å»ºç›¸åº”çš„ Action ï¼Œè§¦å‘çŠ¶æ€å˜åŒ–ï¼›
4. åˆ›å»ºç›¸åº”çš„ reduceï¼›
5. å°†çŠ¶æ€æ·»åŠ åˆ° store ä¸­ï¼Œå¹¶æ”¾åœ¨ APP æœ€é¡¶å±‚ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€æ­¥æ­¥å®ç°ä»£ç é€»è¾‘ã€‚

è¿™é‡Œå•ç‹¬åˆ›å»ºä¸€ä¸ªç›®å½• states ï¼Œç”¨äºçŠ¶æ€ç®¡ç†ï¼Œå…¶æ¬¡åœ¨ states ç›®å½•ä¸­åˆ›å»º name_state.dart ï¼Œå¹¶å®ç°å…¶ä¸­çš„ä»£ç å¦‚ä¸‹ï¼Œåˆ›å»ºç›¸åº”çš„ state ä»¥åŠ Actionã€‚

å¤åˆ¶ä»£ç 

```
import 'dart:math';

/// name çŠ¶æ€ç®¡ç†ç±»

class NameStates {

  final String _name;

  /// getter æ–¹æ³•è·å–name

  get name => _name;

  /// æ„é€ å‡½æ•°

  NameStates(this._name);

  /// åˆå§‹è®¾ç½®

  NameStates.initState() : _name = 'test flutter 1';

}

/// å®šä¹‰ name state å¯¹åº”çš„çŠ¶æ€ä¿®æ”¹ action

///

/// [NameActions.changeName] ä¸ºä¿®æ”¹å½“å‰ name

enum NameActions {

  /// ä¿®æ”¹ name çš„ state

  changeName

}
```

å®ç°å¯¹åº”çš„ Action æ–¹æ³•ã€‚

å¤åˆ¶ä»£ç 

```
/// ä¿®æ”¹å½“å‰nameï¼Œéšæœºé€‰å–ä¸€ä¸ª

NameStates changeName() {

  List<String> nameList = ['flutter one', 'flutter two', 'flutter three'];

  int pos = Random().nextInt(3);

  return NameStates(nameList[pos]);

}
```

åœ¨ reducer ä¸­å¢åŠ å¯¹åº” Action çš„åˆ¤æ–­ã€‚

å¤åˆ¶ä»£ç 

```
/// reducer æ–¹æ³•ï¼Œè§¦å‘ç»„ä»¶æ›´æ–°

NameStates reducer(NameStates state, action){

  if (action == NameActions.changeName) {

    return changeName();

  }

  return state;

}
```

ä¸Šé¢å°±å®Œæˆäº†æ•´ä¸ª state ç±»ç®¡ç†ï¼Œè¿™ç‚¹å’Œå‰ç«¯çš„ reducer å®ç°å®Œå…¨ä¸€è‡´ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹ï¼Œåœ¨ APP åº•å±‚åˆ›å»ºçš„ä»£ç ã€‚

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

import 'package:flutter_redux/flutter_redux.dart';

import 'package:redux/redux.dart';

import 'package:two_you/pages/name_game.dart';

import 'package:two_you/states/name_states.dart';

/// APP æ ¸å¿ƒå…¥å£æ–‡ä»¶

void main() {

  final store =

  Store<NameStates>(reducer, initialState: NameStates.initState());

  runApp(MyApp(store));

}

/// MyApp æ ¸å¿ƒå…¥å£ç•Œé¢

class MyApp extends StatelessWidget {

  /// åˆå§‹

  final Store<NameStates> store;

  /// æ„é€ å‡½æ•°

  MyApp(this.store);

  // This widget is the root of your application.

  @override

  Widget build(BuildContext context) {

    return StoreProvider<NameStates>(

      store: store,

      child: MaterialApp(

          title: 'Two You', // APP åå­—

          debugShowCheckedModeBanner: false,

          theme: ThemeData(

            primarySwatch: Colors.blue, // APP ä¸»é¢˜

          ),

          home: Scaffold(

              appBar: AppBar(

                title: Text('Two You'), // é¡µé¢åå­—

              ),

              body: Center(

                //child: HomePage(),

                child: NameGame(store: store),

              ))),

    );

  }

}
```

åœ¨ main å‡½æ•°ä¸­åˆ›å»º store å¯¹è±¡å¹¶æ‰§è¡Œåˆå§‹åŒ–ï¼Œç„¶ååœ¨å…·ä½“éœ€è¦ä½¿ç”¨ store çš„æ–¹æ³•ä¸­ä½¿ç”¨å¦‚ä¸‹ä»£ç è§„åˆ™ï¼š

å¤åˆ¶ä»£ç 

```
    return StoreProvider<NameStates>(

      store: store,

      child: (å…·ä½“çš„ç»„ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ store å˜é‡),

    )
```

å­ç»„ä»¶å¦‚æœéœ€è¦ä½¿ç”¨ store ï¼Œä¹Ÿéœ€è¦åœ¨å­ç»„ä»¶ä¸­å£°æ˜ store å˜é‡ä½œä¸ºç»„ä»¶å‚æ•°ï¼Œæˆ‘ä»¬çœ‹ä¸‹ RandomName ç»„ä»¶å†…çš„ä½¿ç”¨å’Œå®ç°ã€‚

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

import 'package:flutter_redux/flutter_redux.dart';

import 'package:redux/redux.dart';

import 'package:two_you/states/name_states.dart';

/// éšæœºå±•ç¤ºäººå

class RandomName extends StatelessWidget {

  /// store

  final Store store;

  /// æ„é€ å‡½æ•°

  RandomName({Key key, this.store}) : super(key: key);

  /// æœ‰çŠ¶æ€ç±»è¿”å›ç»„ä»¶ä¿¡æ¯

  @override

  Widget build(BuildContext context) {

    print('random name build');

    return StoreConnector<NameStates,String>(

      converter: (store) => store.state.name.toString(),

      builder: (context, name) {

        return StoreConnector<NameStates,VoidCallback>(

          converter: (store) {

            return () => store.dispatch(NameActions.changeName);

          },

          builder: (context, callback) {

            return FlatButton(

              child: Text(name),

              onPressed: () => callback(),

            );

          }

        );

      },

    );

  }

}
```

è¿™ç§æ–¹å¼å°±éœ€è¦å±‚å±‚ä¼ é€’è¿™ä¸ª store ï¼Œä»è€Œä¼šæ˜¾å¾—ä»£ç éå¸¸è‡ƒè‚¿ï¼Œç‰¹åˆ«æ˜¯ä¸Šé¢ä»£ç ä¸­çš„ 19 è¡Œå’Œ 22 è¡Œã€‚ä½ ä¼šå‘ç°ï¼Œå¦‚æœéœ€è¦çš„ Action è¶Šå¤šï¼ŒStoreConnector çš„å±‚çº§å°±è¶Šæ·±ï¼Œä½ å°±ä¼šé™·å…¥æ·±æ·±çš„ä»£ç åµŒå¥—ä¸­ã€‚

å½“ç„¶ä½¿ç”¨ redux ï¼Œå¹¶ä¸ä¼šå› ä¸ºçˆ¶ç»„ä»¶çš„æ›´æ–°è€Œå¯¼è‡´å­ç»„ä»¶çš„ build é—®é¢˜ï¼Œå…¶ä»–éƒ¨åˆ†è¯¦ç»†çš„ä»£ç ï¼Œå¤§å®¶å¯å‚è€ƒ github æºç ã€‚

#### Provider

æœ€åæˆ‘ä»¬æ¥çœ‹ä¸‹å®˜æ–¹æ¨èçš„æŠ€æœ¯æ–¹æ¡ˆ Provider ï¼Œå¼€å‘è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œåˆ†ä¸ºä¸‰æ­¥ï¼š

1. åˆ›å»ºçŠ¶æ€ç®¡ç†ç±» name_model ï¼Œåˆ›å»ºå¯¹åº”çš„çŠ¶æ€ name ä»¥åŠå…¶ä¿®æ”¹ name çš„æ–¹æ³• changeNameï¼›
2. åœ¨ name_game ä¸­å¢åŠ  provider çš„æ”¯æŒï¼Œå¹¶å°†ç›¸åº”éœ€è¦å…±äº«çš„ç»„ä»¶ä½¿ç”¨ provider è¿›è¡Œå°è£…ï¼Œç›‘å¬æ•°æ®å˜åŒ–ï¼›
3. åœ¨å­ç»„ä»¶ä¸­è·å– provider çš„ name æ•°æ®ä»¥åŠ changeName æ–¹æ³•ï¼Œåœ¨ç›¸åº”çš„ç‚¹å‡»éƒ¨åˆ†è§¦å‘ changeName äº‹ä»¶ã€‚

åœ¨ä½¿ç”¨ Provider æ¥å®ç°çŠ¶æ€ç®¡ç†ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª model æ–‡ä»¶å¤¹ï¼Œæ”¾å…¥å¯¹åº”çš„çŠ¶æ€ç±» name_model ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š

å¤åˆ¶ä»£ç 

```
import 'dart:math';

import 'package:flutter/material.dart';

/// nameçŠ¶æ€ç®¡ç†æ¨¡å—

class NameModel with ChangeNotifier {

  /// å£°æ˜ç§æœ‰å˜é‡

  String _name = 'test flutter';

  /// è®¾ç½®getæ–¹æ³•

  String get value => _name;

  /// ä¿®æ”¹å½“å‰nameï¼Œéšæœºé€‰å–ä¸€ä¸ª

  void changeName() {

    List<String> nameList = ['flutter one', 'flutter two', 'flutter three'];

    int pos = Random().nextInt(3);

    if(_name != nameList[pos]) {

      _name = nameList[pos];

      notifyListeners();

    }

  }

}
```

åœ¨ç¬¬ 6 è¡Œä»£ç ä¸­ï¼Œä½¿ç”¨äº†ä¸€ä¸ª Dart çš„ with å…³é”®è¯ï¼Œè¿™ä¸ªç”¨æ³•æ˜¯è¡¨ç¤º NameModel å¯ä»¥ç›´æ¥è°ƒç”¨ ChangeNotifier çš„æ–¹æ³•ï¼Œæ¯”å¦‚ç¬¬ 15 è¡Œçš„ä»£ç å°±æ˜¯è°ƒç”¨äº† ChangeNotifier ç±»ä¸­çš„æ–¹æ³•ã€‚ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨ changeName ä¸­è®¾ç½®å®ŒçŠ¶æ€å±æ€§ _name ä»¥åï¼Œé€šè¿‡ ChangeNotifier é€šçŸ¥ç›‘å¬æ–¹ã€‚ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼Œåœ¨ç¬¬ 18 åˆ°ç¬¬ 21 è¡Œè¿›è¡Œäº†åˆ¤æ–­ï¼Œé¿å…å±æ€§æœªæ”¹å˜è€Œè§¦å‘ build æ“ä½œã€‚æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ï¼Œåœ¨ name_game ä¸­æ˜¯å¦‚ä½•ç›‘å¬æ•°æ®å˜åŒ–ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

import 'package:provider/provider.dart';

import 'package:two_you/model/name_model.dart';

import 'package:two_you/widgets/name_game/random_name.dart';

import 'package:two_you/widgets/name_game/test_other.dart';

import 'package:two_you/widgets/name_game/welcome.dart';

/// æµ‹è¯•éšæœºåå­—æ¸¸æˆç»„ä»¶

class NameGame extends StatelessWidget {

  /// è®¾ç½®çŠ¶æ€ name

  final name = NameModel();

  @override

  Widget build(BuildContext context) {

    return Column(

      children: <Widget>[

        Provider<String>.value(

          child: ChangeNotifierProvider.value(

            value: name,

            child: Column(

              children: <Widget>[

                Welcome(),

                RandomName(),

              ],

            ),

          ),

        ),

        TestOther(),

      ],

    );

  }

}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œç¬¬ 13 è¡Œè·å–çŠ¶æ€å±æ€§ name ï¼Œåœ¨ build é€»è¾‘ä¸­ä½¿ç”¨ Provider.value æ¥å°è£…éœ€è¦å…±äº«çš„ç»„ä»¶ï¼ŒString ä¸º name ç›¸åº”çš„å­—æ®µç±»å‹ã€‚å¹¶ä¸”ä½¿ç”¨ ChangeNotifierProvider æ¥æ¥å—ç›‘å¬æ•°æ®å˜åŒ–ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶åˆ™è§¦å‘å­ç»„ä»¶çš„ build ã€‚

æœ€åæˆ‘ä»¬å†æ¥çœ‹å…¶ä¸­çš„ä¸€ä¸ªå­ç»„ä»¶ RandomName ï¼Œåœ¨ RandomName ä¸­å±•ç¤º name å­—æ®µï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæŒ‰é’®è§¦å‘ changeName æ“ä½œï¼Œä»£ç å®ç°å¦‚ä¸‹ã€‚

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

import 'package:provider/provider.dart';

import 'package:two_you/model/name_model.dart';

/// éšæœºå±•ç¤ºäººå

class RandomName extends StatelessWidget {

  /// æœ‰çŠ¶æ€ç±»è¿”å›ç»„ä»¶ä¿¡æ¯

  @override

  Widget build(BuildContext context) {

    final _name = Provider.of<NameModel>(context);

    print('random name build');

    return FlatButton(

      child: Text(_name.value),

      onPressed: () => _name.changeName(),

    );

  }

}
```

ç¬¬ 11 è¡Œé€šè¿‡ Provider.of(context) æ–¹å¼ï¼Œè·å¾—æ ¹èŠ‚ç‚¹ NameModel çš„å¥æŸ„ï¼Œç„¶åé€šè¿‡ NameModel çš„ value è·å¾—çŠ¶æ€ name çš„å€¼ï¼Œå…¶æ¬¡ä½¿ç”¨ _name.changeName æ‰§è¡Œ NameModel çš„æ–¹æ³•ï¼Œè§¦å‘ name çŠ¶æ€å€¼çš„ä¿®æ”¹ï¼Œä»è€Œå†é€šè¿‡ ChangeNotifier é€šçŸ¥åˆ°ä¸¤ä¸ªç»„ä»¶ welcome å’Œ random_name ã€‚

ä»¥ä¸Šå°±å®Œæˆäº†æ•´ä¸ª Provider çš„å®ç°é€»è¾‘ï¼Œç›¸å¯¹å…¶ä»–ä¸¤ç§æŠ€æœ¯æ–¹æ¡ˆï¼Œåˆ™æ›´ç®€æ´ä¸€äº›ã€‚

#### ä¸‰è€…çš„å¯¹æ¯”

ä¸Šé¢ä¸‰ç§æŠ€æœ¯æ–¹æ¡ˆï¼Œåœ¨åŒé¡µé¢ç»„ä»¶å…±äº«éƒ½æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œåœ¨æ€§èƒ½æ–¹é¢ä¹Ÿéƒ½è§£å†³äº†ç»„ä»¶æ›´æ–°é¿å…å…¨å±€å­ç»„ä»¶çš„æ›´æ–°é—®é¢˜ã€‚ä½†æ˜¯ InheritedWidget åœ¨å¤šé¡µé¢é—´æ•°æ®å…±äº«æ¯”è¾ƒéº»çƒ¦ï¼ˆå› ä¸ºéœ€è¦ä¸€ä¸ªå…±åŒçš„çˆ¶èŠ‚ç‚¹ï¼Œå¯¹äºå¤šä¸ªé¡µé¢æ¥è¯´æ²¡æœ‰å…±åŒçš„çˆ¶èŠ‚ç‚¹è¿™ä¸ªæ¦‚å¿µï¼‰ï¼Œè¿™ç‚¹å¯¹äº Redux å’Œ Provider åˆ™è¾ƒä¸ºç®€å•ã€‚å…¶æ¬¡ç”±äº Redux å®¹æ˜“é™·å…¥æ— é™çš„æ·±åº¦åµŒå¥—ï¼Œå› æ­¤ä¹Ÿä¸å»ºè®®ä½¿ç”¨ã€‚æ‰€ä»¥æœ¬ä¸“æ æ¨èä½¿ç”¨ Provider æŠ€æœ¯æ–¹æ¡ˆï¼Œä½¿ç”¨æ–¹å¼è¾ƒä¸ºç®€å•ï¼Œå…¶æ¬¡ä¹Ÿä¸ä¼šå¸¦æ¥å…¶ä»–è´Ÿé¢çš„å½±å“ã€‚

æœ¬è¯¾æ—¶ä¸€å¼€å§‹å°±ä»‹ç»äº†å…³äºå¤šé¡µé¢å†…å®¹å…±äº«å¼•èµ·çš„é—®é¢˜ï¼Œä»è€Œæ€è€ƒçŠ¶æ€ç®¡ç†çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œé‚£ä¹ˆé€šè¿‡æŠ€æœ¯å¯¹æ¯”ï¼Œæˆ‘ä»¬é€‰æ‹©äº† Provider ï¼Œæ¥ä¸‹æ¥æˆ‘ä½¿ç”¨ Provider æ¥å®Œå–„ä¸Šä¸€è¯¾æ—¶ä¸­çš„ä¾‹å­ã€‚

#### åˆ›å»º like_num_model

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

/// nameçŠ¶æ€ç®¡ç†æ¨¡å—

class LikeNumModel with ChangeNotifier {

  /// å£°æ˜ç§æœ‰å˜é‡

  int _likeNum = 0;

  /// è®¾ç½®getæ–¹æ³•

  int get value => _likeNum;

  /// ä¿®æ”¹å½“å‰nameï¼Œéšæœºé€‰å–ä¸€ä¸ª

  void like() {

    _likeNum++;

    notifyListeners();

  }

}
```

ç”±äºæ¯æ¬¡éƒ½ä¼šè‡ªå¢ï¼Œå› æ­¤åœ¨ like å‡½æ•°ä¸­æ— é¡»åˆ¤æ–­æ˜¯å¦ likeNum çŠ¶æ€æœ‰å˜åŒ–ï¼Œåªè¦è‡ªå¢äº† likeNum çŠ¶æ€åé€šçŸ¥ç›‘å¬æ–¹å³å¯ã€‚

#### main å‡½æ•°åˆ›å»ºç›‘å¬ç»„ä»¶

ç”±äºæ¶‰åŠä¸¤ä¸ªé¡µé¢ï¼Œå¹¶ä¸æ˜¯ä¸¤ä¸ªç»„ä»¶ï¼Œå› æ­¤è¿™é‡Œéœ€è¦å°†çŠ¶æ€æå‡åˆ° main å‡½æ•°ä¸­ï¼Œmian ç»„ä»¶çš„å®ç°å¦‚ä¸‹ï¼š

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

import 'package:provider/provider.dart';

import 'package:two_you/model/like_num_model.dart';

import 'package:two_you/pages/home_page.dart';



/// APP æ ¸å¿ƒå…¥å£æ–‡ä»¶

void main() {

  runApp(MyApp());

}

/// MyApp æ ¸å¿ƒå…¥å£ç•Œé¢

class MyApp extends StatelessWidget {

  /// åˆ›å»º like model

  final likeNumModel = LikeNumModel();

  // This widget is the root of your application.

  @override

  Widget build(BuildContext context) {

    return Provider<int>.value(

        child: ChangeNotifierProvider.value(

          value: likeNumModel,

            child: MaterialApp(

                title: 'Two You', // APP åå­—

                debugShowCheckedModeBanner: false,

                theme: ThemeData(

                  primarySwatch: Colors.blue, // APP ä¸»é¢˜

                ),

                home: Scaffold(

                    appBar: AppBar(

                      title: Text('Two You'), // é¡µé¢åå­—

                    ),

                    body: Center(

                      child: HomePage(),

                    ))),

      ),

    );

  }

}
```

ä¸Šè¿°ä»£ç ç¬¬ 16 è¡Œï¼Œåˆ›å»ºäº†çŠ¶æ€ç®¡ç†ç±»çš„å¯¹è±¡ï¼Œå¹¶é€šè¿‡ Provider.value å’Œ ChangeNotifierProvider.value æ¥å°è£…ç»„ä»¶ HomePage ï¼Œç”±äº ArticlePage ä¹Ÿæ˜¯åœ¨é¡µé¢ç»„ä»¶ä¸­çš„ MaterialApp ç»„ä»¶ä¸‹ï¼Œå› æ­¤éƒ½å¯ä»¥é€šè¿‡ context è·å– likeNumModel å¥æŸ„ã€‚

#### ä½¿ç”¨ likeNumModel

ä½¿ç”¨ Provider çš„å¥½å¤„å°±åœ¨äºï¼Œä¸ä½¿ç”¨çš„éƒ¨åˆ†å®Œå…¨ä¸éœ€è¦ä¿®æ”¹ï¼Œåªéœ€è¦åœ¨ä½¿ç”¨è¯¥çŠ¶æ€çš„åœ°æ–¹ä¿®æ”¹å³å¯ã€‚ç”±äº likeNumModel åªåœ¨ article_detail_like å’Œ article_like_bar ä¸­ä½¿ç”¨ï¼Œå› æ­¤ä¿®æ”¹è¿™ä¸¤ä¸ªç»„ä»¶å³å¯ã€‚

article_like_bar ä»£ç å¦‚ä¸‹ï¼š

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

import 'package:provider/provider.dart';

import 'package:two_you/model/like_num_model.dart';

import 'package:two_you/styles/text_syles.dart';

/// å¸–å­æ–‡ç« çš„èµç»„ä»¶

///

/// åŒ…æ‹¬ç‚¹èµç»„ä»¶ icon ï¼Œä»¥åŠç»„ä»¶ç‚¹å‡»æ•ˆæœ

/// éœ€è¦å¤–éƒ¨å‚æ•°[likeNum],ç‚¹èµæ•°é‡

class ArticleLikeBar extends StatelessWidget {

  /// æœ‰çŠ¶æ€ç±»è¿”å›ç»„ä»¶ä¿¡æ¯

  @override

  Widget build(BuildContext context) {

    final likeNumModel = Provider.of<LikeNumModel>(context);

    return Row(

      mainAxisAlignment: MainAxisAlignment.center,

      children: <Widget>[

        FlatButton(

          child: Row(

            children: <Widget>[

              Icon(Icons.thumb_up, color: Colors.grey, size: 18),

              Padding(padding: EdgeInsets.only(left: 10)),

              Text(

                '${likeModel.value}',

                style: TextStyles.commonStyle(),

              ),

            ],

          ),

          onPressed: () => likeNumModel.like(),

        ),

      ],

    );

  }

}
```

åœ¨ç¬¬ 15 è¡Œè·å–æ“ä½œå¥æŸ„ï¼Œç„¶ååœ¨ç¬¬ 26 è¡Œè·å–å±æ€§ likeNum ï¼Œ åœ¨ç¬¬ 31 è¡Œæ‰§è¡Œ likeNumModel æ‰§è¡Œ like æ“ä½œã€‚

article_detail_like ä»£ç å¦‚ä¸‹ï¼š

å¤åˆ¶ä»£ç 

```
import 'package:flutter/material.dart';

import 'package:provider/provider.dart';

import 'package:two_you/model/like_num_model.dart';

import 'package:two_you/styles/text_syles.dart';

/// å¸–å­è¯¦æƒ…é¡µçš„èµç»„ä»¶

///

/// åŒ…æ‹¬ç‚¹èµç»„ä»¶ icon ï¼Œä»¥åŠç»„ä»¶ç‚¹å‡»æ•ˆæœ

/// éœ€è¦å¤–éƒ¨å‚æ•°[likeNum],ç‚¹èµæ•°é‡

class ArticleDetailLike extends StatelessWidget {

  /// æœ‰çŠ¶æ€ç±»è¿”å›ç»„ä»¶ä¿¡æ¯

  @override

  Widget build(BuildContext context) {

    final likeNumModel = Provider.of<LikeNumModel>(context);

    return Column(

      crossAxisAlignment: CrossAxisAlignment.center,

      children: <Widget>[

        FlatButton(

          child: Icon(Icons.thumb_up, color: Colors.grey, size: 40),

          onPressed: () => likeNumModel.like(),

        ),

        Text(

          '${likeNumModel.value}',

          style: TextStyles.commonStyle(),

        ),

      ],

    );

  }

}
```

åŒæ ·ä¸Šé¢çš„ç¬¬ 15 è¡Œè·å– likeNumModel æ“ä½œå¥æŸ„ï¼Œç„¶ååœ¨ç¬¬ 22 è¡Œæ‰§è¡Œ like æ“ä½œï¼Œåœ¨ç¬¬ 25 è¡Œæ˜¾ç¤ºç‚¹èµæ•°é‡ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬è¿è¡Œä¸‹é¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°æ•ˆæœå¦‚å›¾ 5 æ‰€ç¤ºã€‚

![20200620_213558.gif](https://s0.lgstatic.com/i/image/M00/2A/7E/Ciqc1F78dpSARI7HACF3LNRp7LA326.gif)
å›¾ 5 å¤šé¡µé¢çŠ¶æ€ç‚¹èµåŒæ­¥æ•ˆæœ

### æ€»ç»“

ä»¥ä¸Šå°±æ˜¯æœ¬è¯¾æ—¶çš„æ‰€æœ‰å†…å®¹ï¼Œå­¦å®Œæœ¬è¯¾æ—¶ä½ éœ€è¦æŒæ¡ä½¿ç”¨çŠ¶æ€ç®¡ç†çš„åœºæ™¯ï¼Œå¸¸è§çš„çŠ¶æ€ç®¡ç†æœ‰å“ªäº›ã€‚æœ¬è¯¾æ—¶çš„æ ¸å¿ƒæ˜¯éœ€è¦ä½ æŒæ¡ Provider çš„çŠ¶æ€ç®¡ç†æŠ€æœ¯æ–¹æ¡ˆã€‚

è‡³æ­¤ï¼Œæˆ‘å·²ç»å°†ç»„ä»¶çš„è®¾è®¡åŸºæœ¬ä»‹ç»å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ä»‹ç»ç»„ä»¶çš„å•å…ƒæµ‹è¯•ï¼Œä»¥åŠå®Œå–„ç»„ä»¶åŠŸèƒ½ã€‚å¦‚æœä½ æœ‰ç–‘é—®ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€ã€‚

[ç‚¹å‡»æ­¤é“¾æ¥æŸ¥çœ‹æœ¬è¯¾æ—¶æºç ](https://github.com/love-flutter/flutter-column)

00:00

Flutterå¿«å­¦å¿«ç”¨24è®²

ç²¾é€‰ç•™è¨€

![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAABDlBMVEUAAAAAAAArKyscHBwrKyswMDAtLS0xMTEuLi4rKyszMzMzMzMyMjIvLy8zMzMxMTEvLy8tLS0zMzMyMjIxMTEwMDAyMjIwMDAzMzMxMTEwMDAxMTEyMjIzMzMyMjIzMzMxMTEyMjIyMjIyMjIyMjIyMjIyMjIzMzMyMjIzMzMyMjIyMjIzMzMyMjIzMzMyMjIyMjIzMzMyMjIyMjIzMzMyMjIyMjIyMjIzMzMyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIzMzMzMzMyMjIzMzMzMzMzMzMzMzMyMjIzMzMyMjIzMzMzMzMzMzMyMjIzMzMzMzMzMzMyMjIzMzMzMzMyMjIzMzMMFbxYAAAAWXRSTlMAAwYJDBARFRYYHiMkJigqKy0tMzk7PUBBQ0VJTFBSVVlbXGFla3B0dXh/hYeKjY+QkZSVlpiao6ausbK3u73DxcfIys3O0NPY3N3g4uXm6Ovu8fX3+Pr7/Z2GrlIAAAEvSURBVCjPdZJrT8JAEEVvC4ggqAiKiq0vlLa8tIoWBQFBRK0yIrTM//8jfighLWzPh8nNnsnMZrPAAlkxe+Q41DMVGUGiOrHbbzYazb7LpEf9TiVuKzEvx5Q2k7pUUo0HOX9vbsA1aZFNvl9ZI9+x6SWdq1ijyjoApGcWBFizNIAWxUUyTi0gwyUIKXEGZTchlgm3jG4HAAq2XQhWoNMF1QHAZraDFagTHCNMGg4mlbCxlT+MLIRgjWB9hTjp28IZ74vlIV8gQk9i2fqNABqfiJzKVwDk4Xhr3e3QmwQAKfrcXnUp+yfppSzRadCdT2hv2TfkS5/Kv3Av6fsWjgHk1d3NZFa9HfFYk/xzpkb0gT3mr9eR4JLp88f85qCoacXj2NrNp2wfhb0x3h83BKf/ogM3zcQrR7gAAAAASUVORK5CYII=)å†™ç•™è¨€

*è´º

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

2

æºç githubåœ°å€å¯ä»¥è´´ä¸‹å—

ç¼–è¾‘å›å¤ï¼š æ¯è¯¾æ—¶ååº”è¯¥éƒ½æœ‰å–”ï¼Œå°ç¼–å¯ä»¥å†è´´ä¸‹ï¼šhttps://github.com/love-flutter/flutter-column

*åˆš

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

2

å†™çš„ä¸é”™

*é™ˆ

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

1

å¾ˆæ£’ï¼Œè·Ÿç€ä¸“æ å’Œå®˜æ–¹æ–‡æ¡£ï¼Œä¸Šæ‰‹æŒºå¿«çš„

*æ–Œ

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

1

è¯·æ•™ä¸‹ArticleDetailLikeä¸ºä½•ä¸ç»§æ‰¿StatefulWidget?ä¸æ˜¯è¯´åŠ¨æ€çš„è¦ç»§æ‰¿è¿™ä¸ªå—

è®²å¸ˆå›å¤ï¼š è¿™ä¸ªé—®é¢˜æçš„å¾ˆå¥½ï¼Œç”±äºè¿™é‡Œå·²ç»å°†ç»„ä»¶çš„åŠ¨æ€çŠ¶æ€å˜é‡æå‡åˆ°å…¶ä»–çŠ¶æ€ç®¡ç†ä¸­å»äº†ï¼Œè€ŒArticleDetailLikeå°±å˜æˆä¸€ä¸ªæ— çŠ¶æ€ç±»äº†ï¼Œå› ä¸ºè¿™ä¸ª like num å¯¹è¯¥ç»„ä»¶æ¥è¯´å°±æ˜¯ä¸€ä¸ªå¤–éƒ¨å‚æ•°ã€‚æ— çŠ¶æ€ç±»åˆæ€ä¹ˆä¼šæ ¹æ®çŠ¶æ€è€Œæ›´æ–°å‘¢ï¼ŒåŸå› æ˜¯çŠ¶æ€ç®¡ç†æ¨¡å—åœ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘æ— çŠ¶æ€ç»„ä»¶çš„æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯ä¸»åŠ¨é€šçŸ¥ç»„ä»¶æ›´æ–°ã€‚

Lemon

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

ç»™ä½œè€…ç‚¹ä¸ªèµğŸ‘

**ç‘

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

éœ€è¦ä½¿ç”¨ NameGameState æ–¹æ³•æ¥å°è£…ç»„ä»¶ï¼Œå¦‚æœè¯¥å­ç»„ä»¶ç›´æ¥å†™åœ¨ build ä¸­çš„ child æ–¹æ³•ä¸­ï¼Œå°±æ— æ³•åˆ©ç”¨ NameInheritedWidget ä¼˜ç‚¹ â€”â€”â€”â€” è€å¸ˆï¼Œè¯·é—®ä¸ºä»€ä¹ˆç›´æ¥å†™åœ¨buildä¸­ï¼Œå°±æ— æ³•åˆ©ç”¨InheritedWidget ä¼˜ç‚¹äº†ï¼Ÿ

è®²å¸ˆå›å¤ï¼š è¿™é‡Œæ ¸å¿ƒè¦è¡¨è¾¾çš„æ„æ€æ˜¯ï¼Œéœ€è¦å°†NameGameStateä¸­çš„æ‰€æœ‰ç»„ä»¶éƒ½å†™åœ¨NameInheritedWidgetçš„childå±æ€§ä¸­ï¼Œä¸èƒ½å› ä¸ºæ²¡æœ‰ç”¨åˆ°nameå±æ€§è€Œå†™æˆè¿™æ ·ã€‚å¦‚æœå†™æˆä¸‹é¢è¿™æ ·ï¼Œä¼šå› ä¸ºç»„ä»¶NameGameStateçŠ¶æ€çŠ¶æ€å˜åŒ–ï¼Œå¯¼è‡´å­ç»„ä»¶çš„TestOther()é‡æ–°æ¸²æŸ“ï¼Œå› æ­¤å³ä½¿æ²¡æœ‰åº”ç”¨åˆ°å…±äº«å±æ€§æ—¶ï¼Œä¹Ÿè¦åŒ…è£¹åœ¨NameInheritedWidgetçš„childå±æ€§ä¸­ã€‚children: <Widget>[ NameInheritedWidget(child: Column(children: <Widget>[ Welcome(), RandomName(), ]), onNameChange: changeName, name: name), TestOther(), ],

*æ‹¯

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

void main() { runApp( ChangeNotifierProvider( create: (context) = CartModel(), child: MyApp(), ), ); }å’±ä»¬è¿™ä¸ªæ¡ˆä¾‹ åœ¨ChangeNotifierProviderçš„ç”¨æ³•ä¸Šè·Ÿå®˜ç½‘ä¸å¤ªä¸€æ ·ï¼Ÿå®˜ç½‘çš„è¿™ä¸ªå†™æ³•å’Œä½ çš„å†™æ³•ä¸€ä¸ªæ•ˆæœå—

è®²å¸ˆå›å¤ï¼š ç”¨æ³•éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ•ˆæœä¹Ÿæ˜¯ä¸€æ ·ï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬åœ¨åé¢ä¹Ÿæ˜¯ç±»ä¼¼å†™æ³•ã€‚

*ä¸œ

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

${likeModel.value} è¿™æ˜¯ä¸æ˜¯é”™äº†ï¼Ÿ

è®²å¸ˆå›å¤ï¼š æ²¡æœ‰å“ˆï¼Œè¿™ä¸ªæ˜¯ LikeNumModel ç±»çš„ä¸­ä¸€ä¸ª get æ–¹æ³•ï¼Œä½ å¯ä»¥æŸ¥çœ‹ 07 è¯¾æ—¶æºç ä¸­çš„ï¼Œlike_num_model.dart å…¶ä¸­çš„ç¬¬ 9 è¡Œã€‚

**å»º

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

æˆ‘æƒ³é—®ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€ä½†é‡è¦çš„é—®é¢˜ï¼Œä¸Šé¢ä»£ç ç¤ºä¾‹ä¸­ç”¨åˆ°äº†Randomï¼ˆï¼‰ï¼Œç”Ÿæˆéšæœºæ•°ï¼Œå¯ä»¥å¯¹äºåˆšå…¥é—¨flutterçš„äººæ¥è¯´ï¼Œæ˜¯ä¸çŸ¥é“è¿™ä¸ªæ–¹æ³•çš„ï¼Œæœ‰å…·ä½“æ–‡æ¡£æŸ¥çœ‹çš„é“¾æ¥å—ï¼Ÿ

è®²å¸ˆå›å¤ï¼š å¯ä»¥åœ¨è¿™é‡Œçœ‹ä¸‹ï¼šhttps://dart.cn/guides/libraries#multi-platform-libraries

zhangping

![right-icon](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4BAMAAABaqCYtAAAAKlBMVEVHcExnZ2dzc3NmZmZqampmZmZmZmZnZ2dnZ2dnZ2dmZmZoaGhmZmZmZmZl+8SAAAAADXRSTlMA/AbsFtilbj5YwSqJPyESoQAAAZxJREFUOMt1lTtLA1EQha8xRhPTBEmhuKCCoNgoIlYLMcRKBG0sxIUgCDaBSDohEO0FEbQyIBZaBazERvAPWCwxPnP+i3tnrlGTmVPswn73NXNm7hrzq9m9kZ2ckTUUABifkOEBrK7liR7BMRFOA/uFc+BUgnV8mFisEW5IsIFi9FzBuwR91KJnAm8S9EIbxSBeBRZHk86MrBQJWjymJUC3nlugSyk+SQyhANfxos+s4krfM0DZvmbw2cuSCHNGi3PAfUygXYiU79ryyw1ibf0xZ9intBsz6SBadx24iiZXz8kPxCiTtYdLPzKTVFkkLQAZO/VikwYW/x/wHohcT/MiPQE8W9frxJrlbpiw4xvA0vbNmWyhj2Nrhmy+B7nEyTsN0rIaJAc0SDWqwX7rhAYfMa/Dui0bDZbwZAwUGNjWUWActnUUyN2hwDTaOkxRaSiwj6pRhjHKgTazSkWlwBK1jgIpBwrkHCgwyZ0oQ86BAjkHCjziG0KE8YBvCA/5KacOm6sgrHFAotouT6J23bkkLbsNDjM9yt7yP+IbQYga5De+eBMAAAAASUVORK5CYII=)

provider é‚£éƒ¨åˆ†ï¼Œä¸ç”¨withç”¨ï¼Œextendsä¹Ÿèƒ½æ­£å¸¸è°ƒç”¨notifyListeners()çš„class NameModel extends ChangeNotifier

è®²å¸ˆå›å¤ï¼š ç”¨extendsç»§æ‰¿æ˜¯å¯ä»¥æ‰§è¡ŒnotifyListenerså‡½æ•°çš„ã€‚å…·ä½“å¤§å®¶å¯ä»¥å»äº†è§£ä¸‹ä¸‰ä¸ªï¼š implements, extends, with(mixin)