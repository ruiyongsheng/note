## JavaScriptéƒ¨åˆ†

#### 1. call å’Œ applyçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå“ªä¸ªæ€§èƒ½æ›´å¥½ä¸€äº›ï¼Ÿ

```js
// fn.call(obj,10,20,30);
// fn.apply(obj,[10,20,30]);
// callçš„æ€§èƒ½è¦æ¯”applyå¥½é‚£ä¹ˆä¸€äº›ï¼ˆå°¤å…¶æ˜¯ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°è¶…è¿‡ä¸‰ä¸ªçš„æ—¶å€™)ï¼Œæ‰€ä»¥åæœŸå¼€å‘çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨callå¤šä¸€äº›ã€‚
let arr = [10,20,30],obj = {};
function fn (x,y,z){}
fn.apply(obj,fn) // => x=10,y=20,z=30
fn.call(obj,arr); // => x = [10,20,30], y=z= undefined
fn.call(obj,...arr) // => åŸºäºES6çš„å±•å¼€è¿ç®—ç¬¦ä¹Ÿå¯ä»¥å®ç°æŠŠæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ä¾æ¬¡ä¼ é€’ç»™å‡½æ•°
```
console.time å¯ä»¥æµ‹è¯•å‡ºä¸€æ®µç¨‹åºæ‰§è¡Œçš„æ—¶é—´

```js
console.time('A');
for(let i =0;i< 10000000; i++) {

}
console.timeEnd('A');å¯ä»¥ç®—å‡ºforå¾ªç¯æ‰§è¡Œçš„æ—¶é—´é—´éš”
```
#### 2. å®ç° (5).add(3).minus(2), ä½¿å…¶è¾“å‡ºç»“æœä¸ºï¼š6

```js
~function(){
// æ¯ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œå®Œï¼Œéƒ½è¦è¿”å›Numberè¿™ä¸ªç±»çš„å®ä¾‹ï¼Œè¿™æ ·æ‰å¯ä»¥è°ƒå–Numberç±»åŸå‹ä¸­çš„æ–¹æ³•ï¼ˆé“¾å¼æ–¹æ³•ï¼‰
  function Check(n) {
    n = Number(n);
    return isNaN(n) ? 0 : n;
  }
  function add (n) {
    n = Check(n);
    return this + n;
  }

  function minus(n) {
    n = Check(n);
    return this - n;
  }
  Number.prototype.add = add;
  Number.prototype.minus = minus;
  /* ['add','minus'].forEach(item => {
      Number.prototype[item] = eval(item);
  })*/
}()
console.log((5).add(3).minus(2))
```
#### 3. ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°ï¼ˆfunctionï¼‰çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ æ„é€ å‡½æ•°(function)å¯ä»¥ä½¿ç”¨ new ç”Ÿæˆå®ä¾‹ï¼Œé‚£ä¹ˆç®­å¤´å‡½æ•°å¯ä»¥ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

1. ç®­å¤´å‡½æ•°è¯­æ³•ä¸Šæ¯”æ™®é€šå‡½æ•°æ›´åŠ ç®€æ´(ES6ä¸­æ¯ä¸€ç§å‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨å½¢å‚èµ‹é»˜è®¤å€¼ å’Œ å‰©ä½™è¿ç®—ç¬¦)
2. ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„this,å®ƒé‡Œé¢çš„ thisæ˜¯ç»§æ‰¿å‡½æ•°æ‰€å¤„çš„ä¸Šä¸‹æ–‡ï¼ˆä½¿ç”¨call/applyç­‰ä»»ä½•æ–¹å¼éƒ½æ— æ³•æ”¹å˜ this çš„æŒ‡å‘ï¼‰
3. ç®­å¤´å‡½æ•°ä¸­æ²¡æœ‰ argumentsï¼ˆç±»æ•°ç»„ï¼‰,åªèƒ½åŸºäº...argsè·å–ä¼ é€’çš„å‚æ•°é›†åˆï¼ˆæ•°ç»„ï¼‰
4. ç®­å¤´å‡½æ•°ä¸èƒ½è¢« new æ‰§è¡Œï¼ˆå› ä¸ºï¼šç®­å¤´å‡½æ•°æ²¡æœ‰ prototypeï¼‰

    ```js
    let obj = {
        name: 'OBJ'
    };
    function fn1 () {
        console.log(this);
    }
    fn1.call(obj); // {name:'OBJ'}
    let fn2 = () => {
        console.log(this);
    }
    fn2.call(obj); // window
    ```
    // å›è°ƒå‡½æ•°ï¼š æŠŠä¸€ä¸ªå‡½æ•°B ä½œä¸ºä¸€ä¸ªå®å‚ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°Aï¼Œå‡½æ•°Aåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥æŠŠä¼ é€’è¿›æ¥çš„å‡½æ•°Bå»æ‰§è¡Œï¼ˆæ‰§è¡ŒNæ¬¡ï¼Œå¯ä¼ å€¼ï¼Œå¯æ”¹thisï¼‰
    ```js
    function each (arr, callBack) {
        for(let i =0 ; i< arr.length; i++){
            let item = arr[i], index = i;
            callBack(item,index);
        }
    }
    each([10,20,30,40], function (item,index) {
        console.log(item,index)
    })
    ```
#### 4. å¦‚ä½•æŠŠä¸€ä¸ªå­—ç¬¦ä¸²çš„å¤§å°å†™å–åï¼ˆå¤§å†™å˜å°å†™ï¼Œå°å†™å˜å¤§å†™ï¼‰ï¼Œä¾‹å¦‚ï¼š'Abc' å˜æˆ â€˜aBCâ€™

```js
let str = 'qianDuançœŸçš„å¤ªNanäº†ï¼æˆ‘Xueä¸dongäº†';
str = str.replace(/[a-zA-z]/g, content => {
    return content.toUpperCase() === content ?
    content.toLowerCase(): content.toUpperCase();
})
console.log(str); // QIANdUANçœŸçš„å¤ªnANäº†ï¼æˆ‘xUEä¸DONGäº†
```
#### 5.å®ç°ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œä»å­—ç¬¦ä¸²Sä¸­ï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å­—ç¬¦ä¸²Tï¼Œè‹¥å­˜åœ¨è¿”å›æ‰€åœ¨ä½ç½®ï¼Œä¸å­˜åœ¨åˆ™è¿”å›-1ï¼ˆå¦‚æœä¸èƒ½åŸºäº indexOf/includesç­‰å†…ç½®çš„æ–¹æ³•ï¼Œä½ ä¼šå¦‚ä½•å¤„ç†å‘¢ï¼Ÿï¼‰

```js
// å¾ªç¯åŸå§‹å­—ç¬¦ä¸²çš„æ¯ä¸€é¡¹ï¼Œè®©æ¯ä¸€é¡¹ä»å½“å‰ä½ç½®å‘åæˆªå–T.lengthä¸ªå­—ç¬¦ï¼Œç„¶åå’ŒTè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œç»§ç»­å¾ªç¯ï¼›å¦‚æœä¸€æ ·è¿”å›å½“å‰ç´¢å¼•å³å¯ï¼ˆå¾ªç¯ç»“æŸï¼‰;
æ–¹æ³•ä¸€ï¼š
~function () {
  function myIndexOf() {
    let lenT = T.length,
    lenS = this.length, res = -1;
    if (lenT > lenS) return -1;
    for(let i =0; i< lenS - lenT; i++){
        if (this.substr(i,lenT) === T) {
            res = i;
            break;
        }
    }
    return res;
  }
  String.prototype.myIndexOf = myIndexOf;
}();
let S = 'qianduanxiaoyang', T = 'duan';
console.log(S.myIndexOf(T));  // 4
æ–¹æ³•äºŒï¼š
// æ­£åˆ™å¤„ç†ï¼š
~function () {
    function myIndexOf (T) {
        let reg = new RegExp(T),
        res = reg.exec(this);
        return res === null? -1: res.index
    }
    String.prototype.myIndexOf = myIndexOf;
}();
let S = 'qianduanxiaoyang', T = 'duan';
console.log(S.myIndexOf(T));  // 4
```
#### 6. è¾“å‡ºä¸‹é¢ä»£ç è¿è¡Œç»“æœï¼Ÿ
```js
// example 1
var a = {}, b= '123', c = 123;
a[b] = 'b';
a[c] = 'c';
console.log(a[b]); // c

// example 2
var a = {}, b= Symbol('123'), c = Symbol('123');
a[b] = 'b';
a[c] = 'c';
console.log(a[b]); // 'b'
// example 3
var a ={},b ={key: '123'},c={key: '456'};
a[b] = 'b';
a[c] = 'c';
console.log(a[b]); // c
console.log(a) // {[object Object]:"c"}
// 1. å¯¹è±¡çš„å±æ€§åä¸èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆé‡åˆ°å¯¹è±¡å±æ€§åï¼Œä¼šé»˜è®¤è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼‰
// obj = {} arr =[12,23] obj[arr]='å‰ç«¯' obj => {"12,23": 'å‰ç«¯'}
// 2. æ™®é€šå¯¹è±¡.toString() è°ƒå–çš„æ˜¯Object.prototypeä¸Šçš„æ–¹æ³•ï¼ˆè¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥æ£€æµ‹æ•°æ®ç±»å‹çš„ï¼‰
// obj ={} obj.toString() => "[object Object]"
```
#### 7. åœ¨è¾“å…¥æ¡†ä¸­å¦‚ä½•åˆ¤æ–­è¾“å…¥çš„æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ç½‘å€ï¼Œä¾‹å¦‚ï¼šç”¨æˆ·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒéªŒè¯æ˜¯å¦ç¬¦åˆURLç½‘å€çš„æ ¼å¼

let str = "https://www.baidu.com/s?wd=test&rsv_spt=1";
```js
// => URL  æ ¼å¼
// 1. åè®®ï¼š//    http/https/ftp
// 2. åŸŸå  www.baiduc.com
// 3. è¯·æ±‚è·¯å¾„ï¼š / /index.html /stu/index.html /stu
// 4. é—®å·ä¼ å‚   // ?xxx=xxx&xxx=sxxx
// 5. å“ˆå¸Œå€¼ #xxx
let str = "https://www.baidu.com/s?wd=test&rsv_spt=1";
let reg = /^(?:(http|https|ftp):\/\/)?((?:[\w]+\.)+[a-z0-9]+)((?:\/[^/]*)+)?(\?[^#]+)?(#.)?$/i;
console.log(reg.exec(str));
```
#### 8. è¾“å‡ºç»“æœ

```js
function Foo() {
    Foo.a = function () {
        console.log(1)
    }
    this.a = function() {
        console.log(2)
    }
}
Foo.prototype.a = function () {
    console.log(3)
}
Foo.a = function () {
    console.log(4)
}
Foo.a(); // 4
let obj = new Foo(); // => objå¯ä»¥è°ƒå–åŸå‹ä¸Šçš„æ–¹æ³• Foo.a: f=>1 obj.a:f => 2
obj.a(); // 2
Foo.a(); // 1
```
#### 9.ç¼–å†™ä¸€æ¡æ­£åˆ™ï¼Œç”¨æ¥éªŒè¯æ­¤è§„åˆ™ï¼šä¸€ä¸ª6~16ä½çš„å­—ç¬¦ä¸²ï¼Œå¿…é¡»åŒæ—¶åŒ…å«æœ‰å¤§å°å†™å­—æ¯å’Œæ•°å­—

æ­£åˆ™è¡¨è¾¾å¼çš„æ­£å‘é¢„æŸ¥å’Œè´Ÿå‘é¢„æŸ¥
1.  **ï¼ˆ?=patternï¼‰** æ­£å‘é¢„æŸ¥
è¦åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå¿…é¡»æ»¡è¶³pattern
2. **(?!pattern)** è´Ÿå‘é¢„æŸ¥ï¼Œå¿…é¡»ä¸æ»¡è¶³patternè¿™ä¸ªè§„åˆ™
```js
var reg = /(?!^[a-zA-Z]$)(?!^[a-z0-9]$)(?!^[A-Z0-9]$)^[a-zA-Z0-9]{6,16}$/

reg.test(99999999)
false
reg.test('aaaaaa')
false
reg.test('aaaaaaBBBBB')
false
reg.test('aaaaaa66')
false
reg.test('NBBB66')
false
reg.test('aaNBBB66')
true
```
#### 10. å®ç°ä¸€ä¸ª$attr(name,value)éå†ï¼Œå±æ€§ä¸ºname,å€¼ä¸ºvalueçš„å…ƒç´ é›†åˆ

```js
let ary = $attr('class', 'box');
function $attr (property, value) {
    // 1. è·å–é¡µé¢ä¸­æ‰€æœ‰å…ƒç´ çš„æ ‡ç­¾
    let el = document.getElementsByTagName('*'),
    arr = [];
    // [].forEach.call(el,item => {});
    el = Array.from(el); // ç±»æ•°ç»„è½¬æ•°ç»„
    el.forEach(item => {
        let  itemValue = item.getAttribute(property);
        if (property === 'class') {
            // æ ·å¼ç±»å±æ€§åè¦ç‰¹æ®Šå¤„ç†
            new RegExp('\\b'+ value + '\\b').test(itemValue) ? arr.push(item): null;
            return;
        }
        if (itemValue === value) {
            arr.push(item);
        }
    })
}
console.log($attr('class', 'box'));
```
#### 11. è‹±æ–‡å­—æ¯æ±‰å­—ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œç”¨æ­£åˆ™ç»™è‹±æ–‡å•è¯å‰ååŠ ç©ºæ ¼

```js
let str = "noä½œnoæ­»ï¼Œä½ èƒ½ä½ canï¼Œä¸èƒ½noå“”å“”ï¼"
reg = /\b[a-z]+\b/ig;
str = str.replace(reg, val => {
    return " ""+ val + "" ";
}).trim();
// String.prototype.trim/.trimLeft/.trimRight å»é™¤å­—ç¬¦ä¸²é¦–å°¾ç©ºæ ¼
```
#### 12. ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå°†æ•°ç»„æ‰å¹³åŒ–ï¼Œå¹¶å»é™¤å…¶ä¸­é‡å¤éƒ¨åˆ†æ•°æ®ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå‡åºä¸”ä¸é‡å¤çš„æ•°æ®

```js
let arr = [[1,2,2],[3,4,5,5],[6,7,8,9,[11,12,[12,13,[14]]]],10];
// æ–¹æ³•ä¸€ï¼šArray.prototype.flat(Infinity);
arr = arr.flat(Infinity);
// new Set å»é‡
arr = Array.from(new Set(arr)).sort((a,b) => a-b);
// æ–¹æ³•äºŒï¼šæŠŠæ•°ç»„ç›´æ¥å˜ä¸ºå­—ç¬¦ä¸²å³å¯ï¼ˆæ•°ç»„toStringä¹‹åï¼Œä¸ç®¡ä½ æœ‰å¤šå°‘çº§ï¼Œæœ€åéƒ½ä¼šå˜ä¸ºä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²,æ²¡æœ‰ä¸­æ‹¬å·å’Œæ‰€è°“çš„å±‚çº§äº†ï¼Œç›¸å½“äºç›´æ¥çš„æ‰å¹³åŒ–äº†ï¼‰
arr = arr.toString().split(',').map(item => Number(item));
// æ–¹æ³•ä¸‰ï¼šJSON.stringfy
arr = JSON.stringify(arr).replace(/(\[|\])/g,'').split(',').map(item => Number(item));
// æ–¹æ³•å››ï¼š Array.some();
//  findå’Œsomeçš„åŒºåˆ«ï¼š someè¿”å›çš„Boolean,findæ‰¾åˆ°ç¬¦åˆè§„åˆ™çš„ï¼Œè¿”å›å½“å‰è¿™ä¸€é¡¹ï¼Œæ²¡æ‰¾åˆ°ç¬¦åˆè§„åˆ™çš„ï¼Œè¿”å›undefined
let flag = arr.some(item => Array.isArray(item))
while(flag){
    arr = [].concat(...arr);
}
// æ–¹æ³•äº”.  é€’å½’å¤„ç†
~function() {
  function myFlat () {
    let result = [],
    _this = this;
    let fn = (arr) => {
        for(let i =0; i< arr.length; i++) {
            let item = arr[i];
            if (Array.isArray(item)) {
                fn(item);
                continue;
            }
            result.push(item);
        }
    }
    fn(_this);
    return result;
  }
  Array.prototype.myFlat = myFlat;
}();
arr = arr.myFlat();
```
#### 13. æ‰‹å†™ä¸€ä¸ª new çš„å®ç°
é¢˜ç›®ï¼š è‡ªå·±å®ç°ä¸€ä¸ª_newçš„å®ç°ï¼Œèƒ½æ¨¡æ‹Ÿå†…ç½®çš„newå…³é”®è¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªDogçš„ä¸€ä¸ªå®ä¾‹sanmao,å®ä¾‹å¯ä»¥è°ƒå–åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•

```js
function Dog (name) {
    this.name = name;
}
Dog.prototype.bark = function () {
    console.log('wangwang');
}
Dog.prototype.sayName = function () {
   console.log("my name is"+ this.name)
}
function _new () {
    // å®ç°ä½ çš„ä»£ç 
}
var sanmao = _new (Dog, 'ä¸‰æ¯›')ï¼›
sanmao.bark() // 'wangwang';
sanmao.sayName(); //  => "my name is ä¸‰æ¯›"
console.log(sanmao instance of Dog) // true

<!--
åˆ†æ new çš„è¿‡ç¨‹éƒ½åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ
1. åƒæ™®é€šå‡½æ•°æ‰§è¡Œä¸€æ ·ï¼Œè¡Œç¨‹ä¸€ä¸ªç§æœ‰çš„ä½œç”¨åŸŸ
    + å½¢å‚å¤åˆ¶
    + å˜é‡æå‡
2. é»˜è®¤åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè®©å‡½æ•°ä¸­çš„thisæŒ‡å‘è¿™ä¸ªå¯¹è±¡é‚£ä¸ªï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å½“å‰ç±»çš„ä¸€ä¸ªå®ä¾‹
3. ä»£ç æ‰§è¡Œ
4. é»˜è®¤æŠŠåˆ›å»ºçš„å¯¹è±¡è¿”å›
-->
// å¼€å§‹å®ç°
// classify å½“å‰è¦ new çš„ç±»
// ARG åæœŸéœ€è¦ç»™æ„é€ å‡½æ•°ä¼ é€’çš„å‚æ•°ä¿¡æ¯ => ['ä¸‰æ¯›']
function _new (classify,...args) {
//åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè®©ä»–çš„åŸå‹é“¾æŒ‡å‘classify.prototype(ä½œä¸ºç±»çš„ä¸€ä¸ªå®ä¾‹)
    // let obj = {};
    // obj.__proto__ = classify.prototype;
    let obj = Object.create(classify.prototype);
    classify.call(obj, ...args);
    return obj;
}
```
#### 14. æ•°ç»„çš„åˆå¹¶æ’åº

```js
let ary1 = ['A1','A2','B1','B2','C1','C2','D1','D2'];
let ary2 = ['A','B','C','D'];
// è¦æ±‚ï¼š => åˆå¹¶åçš„æ•°å­—ç»„ä¸º:['A1','A2','A','B1','B2','B','C1','C2','C','D1','D2','D'];
// æ–¹æ³•ä¸€ï¼š
ary2 = ary2.map(item => item + '3');
let arr = ary1.concat(ary2);
arr = arr.sort((a,b) => a.localeCompare(b)).map(item => item.replace('3',''))
console.log(arr);
// ["A1", "A2", "A", "B1", "B2", "B", "C1", "C2", "C", "D1", "D2", "D"]
// ç¼ºç‚¹ï¼šå¦‚æœä¸æ˜¯ABCD,è€Œæ˜¯BDAC,è¿™ç§å°±ä¸è¡Œäº†ï¼Œè¿™ç§è¾“å‡ºè¿˜æ˜¯ABCDï¼Œæ‰“ä¹±äº†åŸæœ‰æ’åº
æ¯”å¦‚ï¼š
let ary1 = ['D1','D2','A1','A2','C1','C2','B1','B2'];
let ary2 = ['B','A','D','C'];
// åˆå¹¶åçš„æ•°ç»„ä¸ºï¼š['D1','D2','D','A1','A2','A','C1','C2','C','B1','B2','B'];
// è§£æ³•ï¼š
// å…ˆå»å¾ªç¯ary2ï¼Œç„¶åè·Ÿary1ä¸­çš„æ¯ä¸€é¡¹åšå¯¹æ¯”
let index = 0; // æœ€åä¸€æ¬¡åŒ…å«å­—æ¯çš„ä¸‹æ ‡
for(let i =0;i< ary2.length; i++) {
    let item2 = ary2[i];
    for(let j =0; j< ary1.length; j++) {
    let item1 = ary1[j];
        if (item1.includes(item2)) {
        // å¦‚æœåŒ…å«å°±è®°å½•å½“å‰è¿™ä¸€é¡¹çš„ç´¢å¼•ä½ç½®ï¼ˆåé¢è¿˜æœ‰åŒ…å«çš„ä¼šé‡æ–°è®°å½•è¿™ä¸ªå€¼ï¼‰
            index = j;
        }
    }
    // å†…å±‚å¯¹æ¯”å®Œæˆä¹‹åï¼ŒæŠŠ item2 æ’å…¥ ary1 ä¸­ index
    ary1.splice(index + 1, 0, item2);
}
console.log(ary1);
// ["D1", "D2", "D", "A1", "A2", "A", "C1", "C2", "C", "B1", "B2", "B"]
```
#### 15. æ±‚è¾“å‡º 0-9

```js
for(var i=0;i<10;i++) {
    setTimeout(() => {
        console.log(i)
    },1000);
}
```
è§£æï¼š => å®šæ—¶å™¨æ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼šæ¯ä¸€è½®å¾ªç¯è®¾ç½®å®šæ—¶å™¨ï¼Œæ— éœ€ç­‰å®šæ—¶å™¨è§¦å‘æ‰§è¡Œï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€è½®å¾ªç¯ï¼ˆå®šæ—¶å™¨è§¦å‘çš„æ—¶å€™ï¼Œå¾ªç¯éƒ½å·²ç»ç»“æŸäº†ï¼‰

```js
// æ³•1ï¼švar  => let å½¢æˆå—çº§ä½œç”¨åŸŸï¼Œæ¯æ¬¡å¾ªç¯éƒ½åœ¨å½“å‰ä½œç”¨åŸŸå½¢æˆä¸€ä¸ªç§æœ‰å˜é‡ i å­˜å‚¨ 0~9
for(let i=0;i<10;i++) {
    setTimeout(() => {
        console.log(i)
    },1000);
}
// æ³•2ï¼š é—­åŒ…è§£å†³
for(var i=0;i<10;i++) {
    ~function(i){
        setTimeout(() => {
            console.log(i)
        },1000);
    }(i)
}
// æ³•3ï¼š ç®­å¤´å‡½æ•°+é—­åŒ…
for(var i=0;i<10;i++) {
    setTimeout((i => () => console.log(i))(i),1000);
}
// æ³•4ï¼šåŸºäºbindçš„é¢„å¤„ç†æœºåˆ¶ï¼šåœ¨å¾ªç¯çš„æ—¶å€™å°±æŠŠæ¯æ¬¡æ‰§è¡Œå‡½æ•°éœ€è¦è¾“å‡ºçš„ç»“æœï¼Œé¢„å…ˆä¼ ç»™å‡½æ•°å³å¯ã€‚
var fn = function (i) {
    console.log(i);
}
for(var i=0;i<10;i++) {
    setTimeout(fn.bind(null,i),1000);
}
```
#### 16. è¾“å‡ºå€¼

```js
let fn = function AAA() {
    console.log(AAA);
}
AAA(); // => Uncaught ReferenceError: AAA is not defined
// 1. æœ¬åº”åŒ¿åçš„å‡½æ•°å¦‚æœè®¾ç½®äº†å‡½æ•°åï¼Œåœ¨å¤–é¢è¿˜æ˜¯æ— æ³•è°ƒç”¨ï¼Œä½†æ˜¯åœ¨å‡½æ•°é‡Œé¢æ˜¯å¯ä»¥ä½¿ç”¨çš„
// 2.è€Œä¸”ç±»ä¼¼äºåˆ›å»ºå¸¸é‡ä¸€æ ·ï¼Œè¿™ä¸ªåå­—å­˜å‚¨çš„å€¼ä¸èƒ½å†è¢«ä¿®æ”¹ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ä¸æŠ¥é”™ï¼Œä½†æ˜¯ä¸ä¼šæœ‰ä»»ä½•çš„æ•ˆæœï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ç›´æ¥æŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠAAAç†è§£ä¸ºæ˜¯ç”¨ const åˆ›å»ºå‡ºæ¥çš„ï¼‰
let fn = function AAA() {
    'use strict'
    AAA = '1000';
    // Uncaught TypeError: Assignment to constant variable.
}
fn();

let fn = function AAA() {
    AAA = '1000';
    console.log(AAA); =>
    // Æ’ AAA () {
    // AAA = '1000';
    // console.log(AAA);
    }
}
fn();
çœ‹å®Œä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬åˆ†æè¿™é“é¢˜
var b = 10;
(function b() {
    b =20;
    console.log('1',b);
})();
console.log('2',b);
=>è¾“å‡º
1 Æ’ b() {
    b =20;
    console.log('1',b);
}
2 10

æ€è€ƒğŸ¤”ï¼šé‚£æˆ‘æ€ä¹ˆæ”¹ï¼Œæ‰èƒ½è¾“å‡º 20ï¼Œ10å‘¢
var b = 10;
(function b(b) {
    var b =20;
    console.log('1',b); // =>1 20 é‡Œè¾¹çš„bä¸€å®šéœ€è¦æ˜¯ç§æœ‰çš„ï¼Œä¸èƒ½æ˜¯å…¨å±€çš„ï¼ˆå£°æ˜å®ƒï¼ˆlet/var/constï¼‰æˆ–è€…æ”¹ä¸ºå½¢å‚ï¼ˆbï¼‰ï¼‰
})();
console.log('2',b); // => 2 10

æ€è€ƒğŸ¤”ï¼šé‚£æˆ‘æ€ä¹ˆæ”¹ï¼Œæ‰èƒ½è¾“å‡º 20ï¼Œ20å‘¢
var b = 10;
(function () {
    b =20;
    console.log(b); // 20
})();
console.log(b); // 20
åªéœ€è¦å‡½æ•°æ”¹ä¸ºåŒ¿åå‡½æ•°ï¼Œbå°±å˜æˆå…¨å±€çš„äº†
```
#### 17. æ±‚è§£ä¸‹é¢˜
å½“ a ç­‰äº ï¼Ÿ èƒ½è¾“å‡º ok

```js
var a = ?
if (a == 1 && a == 2 && a == 3) {
    console.log('ok');
}
```
```js
//  == è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œå¦‚æœå·¦å³ä¸¤è¾¹æ•°æ®ç±»å‹ä¸ä¸€æ ·ï¼Œåˆ™å…ˆè½¬ä¸ºç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒ
// 1. {} == {} ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”è¾ƒçš„å †å†…å­˜çš„åœ°å€
// 2. null == undefined ç›¸ç­‰çš„  null === undefined ä¸ç›¸ç­‰
// 3. NaN == NaN ä¸ç›¸ç­‰   NaNå’Œè°éƒ½ä¸ç›¸ç­‰
// 4. [12] == '12' å¯¹è±¡å’Œå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œæ˜¯æŠŠå¯¹è±¡toString()è½¬æ¢ä¸ºå­—ç¬¦ä¸²åå†è¿›è¡Œæ¯”è¾ƒçš„
// 5. å‰©ä½™æ‰€æœ‰æƒ…å†µåœ¨è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œéƒ½æ˜¯è½¬æ¢ä¸ºæ•°å­—ï¼ˆå‰ææ˜¯æ•°æ®ç±»å‹ä¸ä¸€æ ·ï¼‰
// å¯¹è±¡è½¬æ•°å­—ï¼šå…ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åå†è½¬æ¢ä¸ºæ•°å­—
// å­—ç¬¦ä¸²è½¬æ•°å­—ï¼š åªè¦å‡ºç°ä¸€ä¸ªéæ•°å­—å­—ç¬¦ï¼Œç»“æœå°±æ˜¯NaN
// å¸ƒå°”è½¬æ•°å­—ï¼š true => 1 false => 0
// null è½¬æ•°å­— 0
// undefined è½¬æ•° NaN
// [12] == true => Number([12].toString()) == 1  => false
// [] == false => 0==0 => true
// [] == 1 =>  0 == 1 => false
```

```js
å›åˆ°é¢˜ç›®
// => åˆ¤æ–­æ¡ä»¶ å¯¹è±¡è·Ÿæ•°å­—ä½œæ¯”è¾ƒ:
// => å…ˆæŠŠå¯¹è±¡.toString()å˜ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åå†è½¬æ¢ä¸ºæ•°å­—
var a = ?
if (a == 1 && a == 2 && a == 3) {
    console.log('ok');
}
// æ–¹æ³•1ï¼š
var a = {
    n: 0,
    toString: function () {
        return ++this.n;
    }
}
if (a == 1 && a == 2 && a == 3) {
    console.log('ok');
}
// è¾“å‡º 'ok'
// æ–¹æ³•2ï¼š
// => shift: åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼ŒæŠŠåˆ é™¤çš„å†…å®¹è¿”å›ï¼ŒåŸæœ‰æ•°ç»„æ”¹å˜ï¼›
var a = [1,2,3];
a.toString = a.shift;
if (a == 1 && a == 2 && a == 3) {
    console.log('ok');
}
// è¾“å‡º 'ok'

// ES6ä¸­æ–°å¢åŠ çš„ä¸€äº›æ–¹æ³•
// String.fromCharCode([n]) <=> 'z'.charCodeAt()
// Array.from()   Array.isArray()
// ??? æœ‰ç–‘é—®
Object.defineProperty(window,'a', {
    get: function() {
        return this.value ? this.value++: this.value =1;
    }
})
if (a == 1 && a == 2 && a == 3) {
    console.log('ok');
}
```
#### 18. æ±‚è§£ä¸‹é¢˜

```js
let obj = {
    2: 3,
    3: 4,
    length: 2,
    push: Array.prototype.push
}
obj.push(1);
obj.push(2);
console.log(obj);
// push çš„ç”¨æ³•
Array.prototype.push = function (val) {
    this[this.length] = val;
    // => this.length åœ¨åŸæ¥çš„åŸºç¡€ä¸ŠåŠ  1
    return this.length
}
// å›åˆ°é¢˜ç›®ä¸Š
// 1. obj.push(1) => obj[obj.length] =1 => obj[2] = 1 => obj.length = 3;
// 2. obj.push(2) => obj[obj.length] = 2=> obj[3] = 2 => obj.length = 4;
æ‰€ä»¥consoleçš„ç»“æœæ˜¯ï¼š
{
    2: 1
    3: 2
    length: 4
    push: Æ’ push()
    __proto__: Object
}
```
#### 19. å†’æ³¡æ’åº
æ€æƒ³ï¼š è®©æ•°ç»„ä¸­çš„å½“å‰é¡¹å’Œåä¸€é¡¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå½“å‰é¡¹æ¯”åä¸€é¡¹å¤§ï¼Œåˆ™ä¸¤é¡¹äº¤æ¢ä½ç½®ï¼ˆè®©å¤§çš„ä½ç½®ï¼‰å³å¯

å›¾è§£ï¼š
![](https://user-gold-cdn.xitu.io/2020/7/12/1734124e70bad248?w=1206&h=440&f=png&s=400548)

```js
var arr = [12,8,24,16,1];
/* bubble: å®ç°å†’æ³¡æ’åº
*  @params
*       ary[array] éœ€è¦æ’åºçš„æ•°ç»„
*  @return
*       [array] æ’åºåçš„æ–°æ•°ç»„
*/
function bubble(arr) {
// å¤–å±‚å¾ªç¯ i æ§åˆ¶æ¯”è¾ƒçš„è½®æ•°
    for(let i =0; i< arr.length-1; i++){
        // é‡Œå±‚å¾ªç¯æ§åˆ¶æ¯ä¸€è½®æ¯”è¾ƒçš„æ¬¡æ•° j
        for(let j =0; j<arr.length-1-i;j++) {
            if (arr[j]>arr[j+1]) {
                let temp = arr[j];
                arr[j] = arr[j+1];
                arr[j+1] = temp;
            }
        }
    }
    return arr
}
console.log(bubble(arr));
=> [1, 8, 12, 16, 24]
```

#### 20. æ’å…¥æ’åº
var arr = [12,8,24,16,1];

å›¾è§£ï¼š

![](https://user-gold-cdn.xitu.io/2020/7/12/1734132ce8c73862?w=992&h=446&f=png&s=193154)
```js
var arr = [12,8,24,16,1];
/* insert: å®ç°æ’å…¥æ’åº
*  @params
*       ary[array] éœ€è¦æ’åºçš„æ•°ç»„
*  @return
*       [array] æ’åºåçš„æ–°æ•°ç»„
*/
function insert (arr) {
// 1. å‡†å¤‡ä¸€ä¸ªæ–°æ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨æŠ“åˆ°æ‰‹é‡Œçš„ç‰Œï¼Œå¼€å§‹å…ˆæŠ“ä¸€å¼ ç‰Œè¿›æ¥
    let handle = [];
    handle.push(arr[0]);
// 2.ä»ç¬¬äºŒé¡¹å¼€å§‹ä¾æ¬¡æŠ“ç‰Œï¼Œä¸€ç›´åˆ°æŠŠå°é¢ä¸Šçš„ç‰ŒæŠ“å…‰
    for(let i =1; i< arr.length; i++){
    // A æ˜¯æ–°æŠ“çš„ç‰Œ
        let A = arr[i];
        // 3. å’Œ handleæ‰‹æœºçš„ç‰Œä¾æ¬¡æ¯”è¾ƒï¼Œä»åå‘å‰æ¯”è¾ƒ
        for(let j = handle.length-1; j >= 0;j--) {
            let B = handle[j];
            // å¦‚æœå½“å‰æ–°ç‰ŒAæ¯”è¦æ¯”è¾ƒçš„ç‰ŒBæ‰“äº†ï¼Œå°±æŠŠAæ”¾åœ¨Bçš„åé¢
            if (A > B) {
               handle.splice(j+1, 0, A);
               break;
            }
            // å¦‚æœæ¯”åˆ°ç¬¬ä¸€é¡¹çš„ï¼Œæˆ‘ä»¬å°±æŠŠæ–°ç‰Œæ”¾åˆ°æ‰‹ä¸­æœ€å‰é¢å³å¯
            if(j===0) {
                handle.unshift(A);
            }
        }
    }
    return handle
}
console.log(insert(arr));
=> [1, 8, 12, 16, 24]
```
#### 21. å¿«é€Ÿæ’åº
å›¾è§£ï¼š

```js
var arr = [12,8,24,16,1];
/* insert: å®ç°å¿«é€Ÿæ’åº
*  @params
*       ary[array] éœ€è¦æ’åºçš„æ•°ç»„
*  @return
*       [array] æ’åºåçš„æ–°æ•°ç»„
*/
function quickSort (arr) {
    // ç»“æŸé€’å½’ï¼ˆå½“arrä¸­å°äºç­‰äºä¸€é¡¹ï¼Œåˆ™ä¸ç”¨å†å¤„ç†ï¼‰
    if (arr.length <= 1) {
        return arr;
    }
  // 1. æ‰¾å‡ºæ•°ç»„ä¸­çš„ä¸­é—´é¡¹ï¼Œåœ¨åŸæœ‰çš„æ•°ç»„ä¸­æŠŠå®ƒç§»é™¤
  let middleIndex = Math.floor(arr.length/2);
  let middleValue = arr.splice(middleIndex,1)[0];
  // 2. å®šä¹‰å·¦å³ä¸¤ä¸ªç©ºæ•°ç»„, å¾ªç¯å‰©ä¸‹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ï¼Œæ¯”å½“å‰é¡¹å°çš„æ”¾åˆ°å·¦è¾¹æ•°ç»„ä¸­ï¼Œåä¹‹æ”¾åˆ°å³è¾¹æ•°ç»„ä¸­
  let arrLeft = [], arrRight = [];
  for (let i = 0; i< arr.length; i++) {
      arr[i] > middleValue ? arrRight.push(arr[i]) : arrLeft.push(arr[i]);
  }
  // 3. é€’å½’æ–¹å¼è®©å·¦å³ä¸¤è¾¹çš„æ•°ç»„æŒç»­è¿™æ ·å¤„ç†ï¼Œä¸€ç›´åˆ°å·¦å³ä¸¤è¾¹éƒ½æ’å¥½åºä¸ºæ­¢ï¼ˆæœ€åè®©å·¦è¾¹+ä¸­é—´+å³è¾¹æ‹¼æ¥æˆä¸ºæœ€åçš„ç»“æœï¼‰
    return quickSort(arrLeft).concat(middleValue, quickSort(arrRight));
}
console.log(quickSort(arr));
```
é€’å½’ï¼š
```js
let total =0;
function sum(n) {
    if (n > 10){
        return 0;
    }
    return n + sum(n+1)
}
total = sum(1);
console.log(total); => 55
```
#### 22. æŸå…¬å¸1åˆ°12æœˆä»½çš„é”€å”®é¢å­˜åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ï¼Œå¦‚ä¸‹ï¼š
{
    1: 222,
    2: 123,
    5: 888
},
è¯·æŠŠæ•°æ®å¤„ç†ä¸ºå¦‚ä¸‹ç»“æ„ï¼š
[222,333,null,null,888,null,null,null,null,null,null]

```js
let obj = {
    1: 222,
    2: 123,
    5: 888
}
// æ–¹æ³•ä¸€ï¼š new Array(12).fill(null)
let arr = new Array(12).fill(null).map((item,index) => {
    return obj[index+1] ||null;
})
console.log(arr);
// æ–¹æ³•äºŒï¼š
let obj = {
    1: 222,
    2: 123,
    5: 888
}
obj.length = 13;
let arr = Array.from(obj).slice(1).map(item => {
    return typeof item === 'undefined' ? null : item;
})
console.log(arr);
// æ–¹æ³•ä¸‰ï¼š
let obj = {
    1: 222,
    2: 123,
    5: 888
}
obj.length = 13;
let arr = new Array(12).fill(null);
Object.keys(obj).forEach(item => {
    arr[item - 1] = obj[item];
})
console.log(arr);
// Array.prototype
// push/pop/shift/unshif/slice/splice/concat/join/toString/reverse/sort/indexOf/lastIndexOf/includes/forEach/map/some/find/flat/fill...
```
#### 23. ç»™å®šä¸¤ä¸ªæ•°ç»„ï¼Œå†™ä¸€ä¸ªæ–¹æ³•æ¥è®¡ç®—å®ƒä»¬çš„äº¤é›†
```js
let num1 = [12,23,34,45,46,56,67];
let num2 = [34,34,45];
// => [2,2]
//æ–¹æ³•ä¸€ï¼šå¸¸è§„åšæ³•
let arr = [];
for(let i =0; i<num1.length;i++){
    let item1 = num1[i];
    for(let j=0; j< num2.length; j++){
        let item2 = num2[j];
        if(item1 === item2){
            arr.push(item1);
            break;
        }
    }
}
console.log(arr); // => [2,2]
// æ–¹æ³•äºŒï¼šç”¨forEach
let arr = [];
num1.forEach(item => num2.includes(item)? arr.push(item): null);
console.log(arr); // => [34,45]
// æ–¹æ³•ä¸‰ï¼š é€šè¿‡indexOf
let arr = [];
num1.forEach((item,index) => {
    // indexæ˜¯ç¬¬ä¸€ä¸ªæ•°ç»„å½“å‰é¡¹ä¸­çš„ç´¢å¼•
    // n å½“å‰é¡¹æ˜¯åœ¨ç¬¬äºŒä¸ªæ•°ç»„ä¸­æ‰¾åˆ°ç›¸åŒé‚£ä¸€é¡¹çš„ç´¢å¼•
    let n = num2.indexOf(item);
    if(n>=0) {
        arr.push(item);
        num1.splice(index,1);
        num2.splice(n,1);
    }
})
```
#### 24. æ—‹è½¬æ•°ç»„

```js
/*
æ—‹è½¬æ•°ç»„
ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³ç§»åŠ¨kä¸ªä½ç½®ï¼Œå…¶ä¸­kæ˜¯éè´Ÿæ•°
è¾“å…¥ï¼š[1,2,3,4,5,6,7] å’Œ k=3
è¾“å‡ºï¼š[5,6,7,1,2,3,4]
è§£é‡Šï¼š
å‘å³æ—‹è½¬1æ­¥ï¼š[7,1,2,3,4,5,6]
å‘å³æ—‹è½¬2æ­¥ï¼š[6,7,1,2,3,4,5]
å‘å³æ—‹è½¬3æ­¥ï¼š[5,6,7,1,2,3,4]

è¾“å…¥ï¼š[-1,-100,3,99] å’Œ k =2
è¾“å‡º: [3,99,-1,-100]
è§£é‡Šï¼š
å‘å³æ—‹è½¬1æ­¥ï¼š[99,-1,-100,3]
å‘å³æ—‹è½¬2æ­¥ï¼š[3,99,-1,-100]
*/
function rotate (k) {
    // å‚æ•°å¤„ç†
    if(k < 0 ||k ===0 || k ===this.length) return this;
    if(k> this.length) k = k % this.length;
    // å¼€å§‹æ—‹è½¬æ•°ç»„
    // æ–¹æ³•ä¸€ï¼š slice
    return this.slice(-k).concat(this.slice(0,this.length-k))
    // æ–¹æ³•äºŒï¼šsplice
    return [...this.splice(this.length -k), ...this]
    // æ–¹æ³•ä¸‰ï¼š
    for(let i =0;i<k; i++) {
        this.unshift(this.pop());
    }
}
Array.prototype.rotate = rotate;
let arr = [1,2,3,4,5,6,7],k=3;
```
#### 25. è¯·å®ç°ä¸€ä¸ªaddå‡½æ•°ï¼Œæ»¡è¶³ä¸€ä¸‹åŠŸèƒ½
// å‡½æ•°çš„æŸ¯é‡ŒåŒ–
```js
// æ‰‹å†™ä¸€ä¸ªbindå‡½æ•°(æŸ¯é‡ŒåŒ–æ€æƒ³)
~function(){
    // => this: éœ€è¦æ”¹å˜ thisçš„å‡½æ•°
    // => context:  éœ€è¦æ”¹å˜çš„thisæŒ‡å‘
    // => outerArg: å…¶ä½™éœ€è¦ä¼ é€’ç»™å‡½æ•°çš„å®å‚ä¿¡æ¯
   function myBind (context = window,...outArg) {
   let _this = this;
       return function(...innerArg) {
           _this.call(context,...outArg.concat(innnerArg))
       }
   }
}()
// å‡½æ•°æŸ¯é‡ŒåŒ–ï¼š é¢„å…ˆå¤„ç†çš„æ€æƒ³ï¼ˆåˆ©ç”¨é—­åŒ…çš„æœºåˆ¶ï¼‰
function fn(x) {
    // é¢„å…ˆåœ¨é—­åŒ…ä¸­æŠŠxå€¼å­˜å‚¨èµ·æ¥
    return function (y){
        return x+y;
    }
}
fn(100,200);
```
```js
add(1) // 1
add(1)(2) // 3
add(1)(2)(3) // 6
add(1)(2)(3)(4) // 10
add(1)(2,3) // 6
add(1,2)(3) // 6
add(1,2,3) // 6

// å®ç°æ€è·¯
function currying(fn, length) {
    length = length || fn.length;
    return function (...args) {
        if(args.length >= length){
            return fn(...args);
        }
        return currying(fn.bind(null,...args), length - args.length);
    }
}
function add (n1,n2,n3,n4) {
    return n1+n2+n3+n4;
}
add = currying(add,4);
console.log(add(1)(2)(3)(4)); // => 10
console.log(add(1,2)(3,4)); // => 10
```
æ€è·¯:

![](https://user-gold-cdn.xitu.io/2020/7/12/17341f3aaec00f7f?w=1268&h=480&f=png&s=335961)

![](https://user-gold-cdn.xitu.io/2020/7/12/17341f48af6b2c08?w=1258&h=496&f=png&s=287335)
